import{a as Z,b as $}from"./chunk-WMIZ32TX.js";import{a as ee}from"./chunk-G4DMEOA2.js";import{a as X}from"./chunk-PQWWGH2I.js";import{a as Q}from"./chunk-5HNPAAR5.js";import{a as N,b as D,c as j,f as H,h as O,i as A,j as z,k as R,l as U,m as Y,o as J,p as K}from"./chunk-BIJEMQVT.js";import"./chunk-M2GT5SNT.js";import{$a as v,Db as W,Eb as q,Ga as C,Hb as G,Ia as _,Ma as e,Na as t,Oa as x,Pa as S,Qa as g,Ra as p,Va as I,W as T,Wa as r,Xa as V,Ya as w,_a as F,ab as h,bb as y,ca as c,da as m,db as B,ea as b,fa as f,jb as L,wa as d,xa as E}from"./chunk-SFQMZB6G.js";import{a as M,b as k,h as P}from"./chunk-FK42CRUA.js";function ie(s,a){if(s&1&&(e(0,"span"),r(1),t()),s&2){let i=p().$implicit;d(),w("DNI: ",i.documento,"")}}function ne(s,a){if(s&1&&(e(0,"span",78),r(1),t()),s&2){let i=p().$implicit;d(),w("Tel: ",i.telefono,"")}}function oe(s,a){if(s&1){let i=S();e(0,"div",73),g("click",function(){let o=c(i).$implicit,l=p(2);return m(l.seleccionarCliente(o))}),e(1,"div",74),r(2),t(),e(3,"div",75),C(4,ie,2,1,"span",76)(5,ne,2,1,"span",77),t()()}if(s&2){let i=a.$implicit;d(2),V(i.nombre),d(2),_("ngIf",i.documento),d(),_("ngIf",i.telefono)}}function re(s,a){if(s&1&&(e(0,"div",71),C(1,oe,6,3,"div",72),t()),s&2){let i=p();d(),_("ngForOf",i.clientesFiltrados)}}function ae(s,a){if(s&1){let i=S();e(0,"div",79),r(1," No se encontraron clientes. "),e(2,"button",80),g("click",function(){c(i);let o=p();return m(o.abrirModalCliente())}),r(3,"Crear nuevo"),t()()}}function le(s,a){if(s&1&&(e(0,"option",35),r(1),t()),s&2){let i=a.$implicit;_("value",i.id_producto),d(),F(" ",i.nombre," \u2013 S/. ",i.precio_unitario," (Stock: ",i.stock_actual||0,") ")}}function de(s,a){if(s&1){let i=S();e(0,"tr",87)(1,"td",88),r(2),t(),e(3,"td",89),r(4),t(),e(5,"td",90),r(6),t(),e(7,"td",90),r(8),t(),e(9,"td",91),r(10),t(),e(11,"td",92)(12,"button",93),g("click",function(){let o=c(i).index,l=p(2);return m(l.eliminar(o))}),b(),e(13,"svg",94),x(14,"path",64),t()()()()}if(s&2){let i=a.$implicit,n=p(2);d(2),V(n.getNombreProducto(i.id_producto)),d(2),V(i.cantidad),d(2),w("S/. ",(i.precio_unitario||0).toFixed(2),""),d(2),w("S/. ",(i.descuento||0).toFixed(2),""),d(2),w("S/. ",(i.subtotal||0).toFixed(2),"")}}function se(s,a){if(s&1&&(e(0,"table",81)(1,"thead",82)(2,"tr")(3,"th",83),r(4,"Producto"),t(),e(5,"th",84),r(6,"Cant."),t(),e(7,"th",85),r(8,"Precio"),t(),e(9,"th",85),r(10,"Desc."),t(),e(11,"th",85),r(12,"Subtotal"),t(),e(13,"th",84),r(14,"Acciones"),t()()(),e(15,"tbody"),C(16,de,15,5,"tr",86),t()()),s&2){let i=p();d(16),_("ngForOf",i.carrito)}}function ce(s,a){s&1&&(e(0,"div",95),b(),e(1,"svg",96),x(2,"path",6),t(),f(),e(3,"h3",97),r(4,"Carrito vac\xEDo"),t(),e(5,"p",98),r(6,"Agrega productos para comenzar la venta."),t()())}function me(s,a){s&1&&(e(0,"div",99)(1,"strong"),r(2,"Nota:"),t(),r(3,' El IGV se aplica aunque el comprobante sea "Nota de Venta". '),t())}function ue(s,a){if(s&1&&(e(0,"div",58)(1,"span"),r(2,"IGV (18%)"),t(),e(3,"span"),r(4),t()()),s&2){let i=p();d(4),w("S/. ",(i.igv||0).toFixed(2),"")}}function pe(s,a){if(s&1){let i=S();e(0,"div",100),g("click",function(){c(i);let o=p();return m(o.cerrarModalCliente())}),e(1,"div",101),g("click",function(o){return c(i),m(o.stopPropagation())}),e(2,"div",102)(3,"h3",103)(4,"span",104),b(),e(5,"svg",105),x(6,"path",106),t()(),r(7," Nuevo Cliente "),t(),f(),e(8,"button",107),g("click",function(){c(i);let o=p();return m(o.cerrarModalCliente())}),b(),e(9,"svg",66),x(10,"path",64),t()()(),f(),e(11,"div",108)(12,"div")(13,"label",109),r(14,"Documento"),t(),e(15,"input",110),y("ngModelChange",function(o){c(i);let l=p();return h(l.nuevoCliente.documento,o)||(l.nuevoCliente.documento=o),m(o)}),t()(),e(16,"div")(17,"label",109),r(18," Nombre "),e(19,"span",111),r(20,"*"),t()(),e(21,"input",112),y("ngModelChange",function(o){c(i);let l=p();return h(l.nuevoCliente.nombre,o)||(l.nuevoCliente.nombre=o),m(o)}),t()(),e(22,"div")(23,"label",109),r(24,"Tipo"),t(),e(25,"select",113),y("ngModelChange",function(o){c(i);let l=p();return h(l.nuevoCliente.tipo,o)||(l.nuevoCliente.tipo=o),m(o)}),e(26,"option",114),r(27,"-- Seleccione --"),t(),e(28,"option",115),r(29,"Natural"),t(),e(30,"option",116),r(31,"Empresa"),t()()(),e(32,"div")(33,"label",109),r(34,"Tel\xE9fono"),t(),e(35,"input",117),y("ngModelChange",function(o){c(i);let l=p();return h(l.nuevoCliente.telefono,o)||(l.nuevoCliente.telefono=o),m(o)}),t()(),e(36,"div")(37,"label",109),r(38,"Direcci\xF3n"),t(),e(39,"input",118),y("ngModelChange",function(o){c(i);let l=p();return h(l.nuevoCliente.direccion,o)||(l.nuevoCliente.direccion=o),m(o)}),t()()(),e(40,"div",119)(41,"button",120),g("click",function(){c(i);let o=p();return m(o.cerrarModalCliente())}),r(42," Cancelar "),t(),e(43,"button",121),g("click",function(){c(i);let o=p();return m(o.guardarCliente())}),b(),e(44,"svg",122),x(45,"path",67),t(),r(46," Guardar Cliente "),t()()()()}if(s&2){let i=p();d(15),v("ngModel",i.nuevoCliente.documento),d(6),v("ngModel",i.nuevoCliente.nombre),d(4),v("ngModel",i.nuevoCliente.tipo),d(),_("ngValue",null),d(9),v("ngModel",i.nuevoCliente.telefono),d(4),v("ngModel",i.nuevoCliente.direccion)}}function ge(s,a){s&1&&(e(0,"div",130),b(),e(1,"svg",96),x(2,"path",131),t(),f(),e(3,"p",132),r(4,"No se encontraron productos"),t()())}function be(s,a){if(s&1){let i=S();e(0,"div",133),g("click",function(){let o=c(i).$implicit,l=p(2);return m(l.seleccionarProductoDesdeModal(o))}),e(1,"div",134)(2,"div",3)(3,"div",74),r(4),t(),e(5,"div",135)(6,"span"),r(7),t(),e(8,"span",136),r(9),t()()(),e(10,"div",137)(11,"div",138),r(12),t()()()()}if(s&2){let i=a.$implicit;d(4),V(i.nombre),d(3),w("C\xF3digo: ",i.codigo,""),d(2),w("Stock: ",i.stock_actual||0,""),d(3),w("S/. ",i.precio_unitario,"")}}function _e(s,a){if(s&1){let i=S();e(0,"div",100),g("click",function(){c(i);let o=p();return m(o.cerrarModalBusquedaProducto())}),e(1,"div",123),g("click",function(o){return c(i),m(o.stopPropagation())}),e(2,"div",102)(3,"h3",103)(4,"span",104),b(),e(5,"svg",105),x(6,"path",43),t()(),r(7," Buscar Producto "),t(),f(),e(8,"button",107),g("click",function(){c(i);let o=p();return m(o.cerrarModalBusquedaProducto())}),b(),e(9,"svg",66),x(10,"path",64),t()()(),f(),e(11,"div",124)(12,"div",125)(13,"input",126),y("ngModelChange",function(o){c(i);let l=p();return h(l.busquedaProducto,o)||(l.busquedaProducto=o),m(o)}),g("input",function(){c(i);let o=p();return m(o.filtrarProductos())}),t()(),e(14,"div",127),C(15,ge,5,0,"div",128)(16,be,13,4,"div",129),t()()()()}if(s&2){let i=p();d(13),v("ngModel",i.busquedaProducto),d(2),_("ngIf",i.productosFiltrados.length===0),d(),_("ngForOf",i.productosFiltrados)}}var te=class s{constructor(a,i,n){this.ventasService=a;this.clientesService=i;this.productosService=n}clientes=[];productos=[];clientesFiltrados=[];productosFiltrados=[];busquedaCliente="";busquedaProducto="";mostrarModalBusquedaProducto=!1;mostrarModalCliente=!1;nuevoCliente={nombre:"",tipo:null,documento:"",telefono:"",direccion:""};aplicarIgv=!1;incluirIGV=!1;igv=0;base_imponible=0;total_con_igv=0;venta={id_usuario:"",id_cliente:0,tipo_comprobante:"Boleta",nro_comprobante:"",metodo_pago:"Efectivo",total:0,base_imponible:0,igv:0};carrito=[];formProducto={id_producto:0,cantidad:1,descuento:0};ngOnInit(){return P(this,null,function*(){let a=localStorage.getItem("user_id");if(!a){alert("Sesi\xF3n expirada. Inicie sesi\xF3n nuevamente."),window.location.href="/";return}this.venta.id_usuario=a,this.clientes=yield this.clientesService.getClientes(),this.clientesFiltrados=this.clientes.slice(0,5),this.productos=yield this.productosService.getProductos(!1),this.productos=this.productos.filter(i=>{let n=i.activo!==!1,o=i.stock_actual||0;return n&&o>0}),this.productosFiltrados=this.productos})}filtrarClientes(){if(!this.busquedaCliente||this.busquedaCliente.trim()===""){this.clientesFiltrados=this.clientes.slice(0,5);return}let a=this.busquedaCliente.toLowerCase().trim();this.clientesFiltrados=this.clientes.filter(i=>{let n=(i.nombre||"").toLowerCase(),o=(i.documento||"").toLowerCase(),l=(i.telefono||"").toLowerCase();return n.includes(a)||o.includes(a)||l.includes(a)}).slice(0,10)}seleccionarCliente(a){this.venta.id_cliente=a.id_cliente,this.busquedaCliente=a.nombre,this.clientesFiltrados=[]}filtrarProductos(){let a=this.productos.filter(n=>{let o=n.activo!==!1,l=n.stock_actual||0;return o&&l>0});if(!this.busquedaProducto||this.busquedaProducto.trim()===""){this.productosFiltrados=a;return}let i=this.busquedaProducto.toLowerCase().trim();this.productosFiltrados=a.filter(n=>{let o=(n.nombre||"").toLowerCase(),l=(n.codigo||"").toLowerCase();return o.includes(i)||l.includes(i)})}seleccionarProducto(a){this.formProducto.id_producto=a.id_producto,this.busquedaProducto=a.nombre,this.productosFiltrados=[a]}abrirModalBusquedaProducto(){this.busquedaProducto="",this.productosFiltrados=this.productos.filter(a=>{let i=a.activo!==!1,n=a.stock_actual||0;return i&&n>0}),this.mostrarModalBusquedaProducto=!0}cerrarModalBusquedaProducto(){this.mostrarModalBusquedaProducto=!1,this.busquedaProducto="",this.productosFiltrados=this.productos.filter(a=>{let i=a.activo!==!1,n=a.stock_actual||0;return i&&n>0})}seleccionarProductoDesdeModal(a){this.formProducto.id_producto=a.id_producto,this.cerrarModalBusquedaProducto()}abrirModalCliente(){this.nuevoCliente={nombre:"",tipo:null,documento:"",telefono:"",direccion:""},this.mostrarModalCliente=!0}cerrarModalCliente(){this.mostrarModalCliente=!1,this.nuevoCliente={nombre:"",tipo:null,documento:"",telefono:"",direccion:""}}guardarCliente(){return P(this,null,function*(){if(!this.nuevoCliente.nombre||this.nuevoCliente.nombre.trim()===""){alert("El nombre es obligatorio");return}try{let a=yield this.clientesService.addCliente(this.nuevoCliente);this.clientes.push(a),this.venta.id_cliente=a.id_cliente,this.busquedaCliente=a.nombre,this.clientesFiltrados=[a],this.cerrarModalCliente(),alert("Cliente registrado correctamente")}catch(a){console.error("Error al guardar cliente:",a),alert("Error al guardar cliente. Verifique la consola.")}})}getNombreProducto(a){let i=this.productos.find(n=>n.id_producto===a);return i?i.nombre:"---"}agregarProducto(){let a=this.productos.find(l=>l.id_producto==this.formProducto.id_producto);if(!a){alert("Seleccione un producto");return}if(this.formProducto.cantidad<=0){alert("La cantidad debe ser mayor a 0");return}let i=a.stock_actual||0;if(this.formProducto.cantidad>i){alert(`Stock insuficiente. Disponible: ${i} unidades`);return}let n=a.precio_unitario,o={id_producto:a.id_producto,cantidad:this.formProducto.cantidad,precio_unitario:n,descuento:this.formProducto.descuento,subtotal:n*this.formProducto.cantidad-this.formProducto.descuento};this.carrito.push(o),this.formProducto={id_producto:0,cantidad:1,descuento:0},this.calcularTotal()}eliminar(a){this.carrito.splice(a,1),this.calcularTotal()}calcularTotal(){let a=this.carrito.reduce((i,n)=>i+(n.subtotal??0),0);this.incluirIGV?(this.base_imponible=a/1.18,this.igv=a-this.base_imponible,this.total_con_igv=a,this.venta.total=this.total_con_igv):(this.base_imponible=a,this.igv=0,this.total_con_igv=a,this.venta.total=a)}limpiarVenta(){this.carrito=[],this.venta.total=0,this.venta.base_imponible=0,this.venta.igv=0,this.venta.id_cliente=0,this.venta.tipo_comprobante="Boleta",this.venta.metodo_pago="Efectivo",this.venta.nro_comprobante="",this.formProducto={id_producto:0,cantidad:1,descuento:0},this.busquedaCliente="",this.busquedaProducto="",this.clientesFiltrados=this.clientes.slice(0,5),this.productosFiltrados=this.productos,this.aplicarIgv=!1,this.calcularTotal()}procesarVenta(){return P(this,null,function*(){if(this.carrito.length===0){alert("Agregue productos");return}try{let a=k(M({},this.venta),{id_cliente:this.venta.id_cliente===0?void 0:this.venta.id_cliente}),i=yield this.ventasService.registrarVenta(a,this.carrito);alert(`Venta procesada correctamente (#${i})`),this.limpiarVenta()}catch(a){console.error(a),alert("Error al procesar venta. Revisa la consola.")}})}generarComprobantePDF(){if(this.venta.tipo_comprobante==="No desea"){alert("No se generar\xE1 comprobante.");return}let a=this.clientes.find(l=>Number(l.id_cliente)===Number(this.venta.id_cliente)),i=new Z({orientation:"portrait",unit:"mm",format:[80,200]});i.setFontSize(10),i.text("FERRETER\xCDA RHEMA",40,10,{align:"center"}),i.text("RUC: 12345678901",40,15,{align:"center"}),i.text("----------------------------------------",2,20),i.text(`Comprobante: ${this.venta.tipo_comprobante}`,2,26),i.text(`N\xFAmero: ${this.venta.nro_comprobante||"---"}`,2,31),i.text(`Cliente: ${a?.nombre||"No seleccionado"}`,2,36),i.text("----------------------------------------",2,42),$(i,{startY:45,head:[["Prod","Cant","P.Unit","Sub"]],body:this.carrito.map(l=>[this.getNombreProducto(l.id_producto),l.cantidad.toString(),"S/ "+l.precio_unitario.toFixed(2),"S/ "+(l.subtotal??0).toFixed(2)]),theme:"plain",styles:{fontSize:8}});let n=i.lastAutoTable.finalY+5;i.text("----------------------------------------",2,n),n+=5,i.setFontSize(12),i.text(`TOTAL: S/ ${this.venta.total.toFixed(2)}`,2,n);let o=`${this.venta.tipo_comprobante}-${Date.now()}.pdf`;i.save(o)}static \u0275fac=function(i){return new(i||s)(E(X),E(ee),E(Q))};static \u0275cmp=T({type:s,selectors:[["app-pos"]],standalone:!0,features:[B],decls:148,vars:23,consts:[["sinCarrito",""],[1,"w-full","max-w-[1200px]","mx-auto","flex","flex-col","px-2","md:px-3","pb-2"],[1,"flex","items-start","justify-between","gap-4","px-0","py-3","pb-2","bg-transparent","border-none","shadow-none"],[1,"flex-1"],[1,"flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],[1,"m-0","text-2xl","font-semibold","text-gray-900","tracking-wide"],[1,"mt-1","mb-0","text-sm","text-gray-600"],[1,"flex","flex-row","gap-4"],[1,"w-full","lg:w-4/12","space-y-4"],[1,"flex","items-center","justify-between","px-0","py-1.5","mb-1.5","border-b","border-gray-200"],[1,"flex","items-center","text-gray-900","text-xs","font-semibold","uppercase","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"px-0","pb-3"],[1,"grid","grid-cols-1","gap-3"],[1,"block","mb-2","text-gray-900","text-sm","font-medium","leading-6"],[1,"text-gray-400","text-xs","font-normal"],[1,"relative"],["type","text","placeholder","Buscar por nombre, DNI o tel\xE9fono...",1,"w-full","px-3","py-2.5","pr-20","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","focus","ngModel"],["type","button",1,"absolute","right-2","top-1/2","-translate-y-1/2","px-3","py-1.5","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","text-xs","font-medium","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["class","absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",4,"ngIf"],["class","mt-1 text-xs text-gray-500 italic",4,"ngIf"],["name","tipo_comprobante",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900",3,"ngModelChange","ngModel"],["type","text","name","nro_comprobante","placeholder","Ej: B001-000123",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900",3,"ngModelChange","ngModel"],["name","metodo_pago",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900",3,"ngModelChange","ngModel"],[1,"w-full","lg:w-8/12","space-y-4"],[1,"flex","flex-col","w-full","p-4","border","border-gray-200","rounded-lg","bg-white","shadow-sm"],[1,"grid","grid-cols-12","gap-3","mb-3"],[1,"col-span-12","md:col-span-6"],[1,"block","mb-1","text-xs","font-semibold","text-gray-600"],[1,"w-full","px-3","py-2","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-2"],["type","number","min","1",1,"w-full","px-3","py-2","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","text-center","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],["type","number","min","0","step","0.01",1,"w-full","px-3","py-2","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","text-center","focus:ring-2","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","ngModel"],[1,"col-span-6","md:col-span-2","flex","items-end"],["type","button",1,"w-full","px-4","py-2","bg-gray-600","hover:bg-gray-700","text-white","rounded-lg","font-medium","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],[1,"w-full","px-4","py-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","font-medium","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"text-right"],[1,"text-xs","text-gray-600"],[1,"text-lg","font-semibold","text-orange-600"],[1,"rounded-lg","border","border-gray-200","bg-white","shadow-sm","overflow-auto","px-0","pb-2"],["class","w-full border-collapse min-w-[860px]",4,"ngIf","ngIfElse"],[1,"w-full","md:w-96","ml-auto","mt-4","p-4","rounded-lg","border","border-gray-200","bg-white","shadow-sm"],[1,"mb-3"],[1,"block","text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","items-center","space-x-2"],["type","checkbox",1,"w-4","h-4","text-blue-600","bg-gray-100","border-gray-300","rounded","focus:ring-blue-500",3,"ngModelChange","change","ngModel"],[1,"text-sm","text-gray-700"],["class","mt-2 p-2 bg-yellow-50 text-yellow-700 border border-yellow-300 rounded-lg text-xs",4,"ngIf"],[1,"space-y-2","pt-2","border-t","border-gray-200"],[1,"flex","justify-between","text-sm","text-gray-600"],["class","flex justify-between text-sm text-gray-600",4,"ngIf"],[1,"flex","justify-between","text-lg","font-semibold","text-gray-900","pt-2","border-t"],[1,"text-orange-600"],[1,"flex","justify-end","gap-3","mt-4"],[1,"px-5","py-2.5","bg-white","hover:bg-gray-50","border","border-gray-300","text-gray-700","rounded-lg","font-medium","transition-colors","flex","items-center","gap-2",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-6","py-2.5","bg-orange-600","hover:bg-orange-700","text-white","rounded-lg","font-semibold","transition-colors","flex","items-center","gap-2","shadow-md",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"px-5","py-2.5","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","font-medium","transition-colors","flex","items-center","gap-2","shadow-md","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"],["class","fixed inset-0 z-[2000] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",3,"click",4,"ngIf"],[1,"absolute","z-50","w-full","mt-1","bg-white","border","border-gray-300","rounded-lg","shadow-lg","max-h-60","overflow-y-auto"],["class","px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0",3,"click",4,"ngFor","ngForOf"],[1,"px-3","py-2","hover:bg-blue-50","cursor-pointer","border-b","border-gray-100","last:border-b-0",3,"click"],[1,"font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[4,"ngIf"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[1,"mt-1","text-xs","text-gray-500","italic"],["type","button",1,"text-blue-600","hover:underline",3,"click"],[1,"w-full","border-collapse","min-w-[860px]"],[1,"bg-gray-50"],[1,"text-left","text-xs","font-semibold","uppercase","text-gray-700","py-3","px-4","border-b","border-gray-200"],[1,"text-center","text-xs","font-semibold","uppercase","text-gray-700","py-3","px-4","border-b","border-gray-200"],[1,"text-right","text-xs","font-semibold","uppercase","text-gray-700","py-3","px-4","border-b","border-gray-200"],["class","hover:bg-blue-50 transition-colors border-b border-gray-100",4,"ngFor","ngForOf"],[1,"hover:bg-blue-50","transition-colors","border-b","border-gray-100"],[1,"py-3","px-4","font-medium","text-gray-900"],[1,"py-3","px-4","text-center","text-gray-700"],[1,"py-3","px-4","text-right","text-gray-700"],[1,"py-3","px-4","text-right","font-semibold","text-gray-900"],[1,"py-3","px-4","text-center"],["type","button",1,"px-3","py-1.5","bg-red-50","hover:bg-red-100","text-red-700","border","border-red-200","rounded-lg","text-xs","font-medium","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","inline"],[1,"py-12","px-6","text-center","text-gray-500","border","border-dashed","border-gray-300","rounded-lg","bg-gray-50"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-gray-400"],[1,"m-0","mb-2","text-gray-900","font-semibold"],[1,"m-0","text-sm"],[1,"mt-2","p-2","bg-yellow-50","text-yellow-700","border","border-yellow-300","rounded-lg","text-xs"],[1,"fixed","inset-0","z-[2000]","bg-black/50","backdrop-blur-sm","flex","items-center","justify-center","p-4",3,"click"],[1,"w-full","max-w-xl","bg-white","rounded-xl","shadow-xl","border","border-gray-200","overflow-hidden",3,"click"],[1,"flex","items-center","justify-between","p-4","md:p-5","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"p-2","rounded-xl","bg-blue-50","border","border-blue-100"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],["type","button","title","Cerrar",1,"text-gray-500","hover:bg-gray-100","hover:text-gray-900","rounded-lg","w-9","h-9","inline-flex","items-center","justify-center",3,"click"],[1,"p-4","md:p-5","space-y-4","max-h-[70vh]","overflow-y-auto"],[1,"block","mb-2","text-sm","font-medium","text-gray-900"],["type","text","placeholder","Ingrese DNI (8 d\xEDgitos)","maxlength","8",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel"],[1,"text-red-500"],["type","text","placeholder","Nombre completo del cliente","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel"],[1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel"],[3,"ngValue"],["value","natural"],["value","empresa"],["type","text","placeholder","Ej: 987654321",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel"],["type","text","placeholder","Direcci\xF3n del cliente",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2","px-4","md:p-5","py-4","border-t","border-gray-200","bg-gray-50"],["type","button",1,"px-5","py-2.5","bg-gray-500","hover:bg-gray-600","text-white","font-medium","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-gray-500","transition-all","duration-200",3,"click"],["type","button",1,"flex","items-center","px-5","py-2.5","bg-blue-600","hover:bg-blue-700","text-white","font-medium","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:ring-offset-2","transition-all","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],[1,"w-full","max-w-2xl","bg-white","rounded-xl","shadow-xl","border","border-gray-200","overflow-hidden",3,"click"],[1,"p-4","md:p-5"],[1,"mb-4"],["type","text","placeholder","Buscar por nombre o c\xF3digo...",1,"w-full","px-4","py-3","bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500",3,"ngModelChange","input","ngModel"],[1,"max-h-96","overflow-y-auto","border","border-gray-200","rounded-lg"],["class","p-8 text-center text-gray-500",4,"ngIf"],["class","px-4 py-3 hover:bg-blue-50 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"p-8","text-center","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm"],[1,"px-4","py-3","hover:bg-blue-50","cursor-pointer","border-b","border-gray-100","last:border-b-0","transition-colors",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-gray-500","mt-1"],[1,"ml-3"],[1,"text-right","ml-4"],[1,"font-semibold","text-blue-600"]],template:function(i,n){if(i&1){let o=S();e(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4),b(),e(4,"svg",5),x(5,"path",6),t(),f(),e(6,"div")(7,"h1",7),r(8,"Punto de Venta (POS)"),t(),e(9,"p",8),r(10,"Procesa ventas r\xE1pidas y genera comprobantes de pago."),t()()()()(),e(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12),b(),e(15,"svg",13),x(16,"path",14),t(),f(),e(17,"span"),r(18,"DATOS DE VENTA"),t()()(),e(19,"section",15)(20,"div",16)(21,"div")(22,"label",17),r(23," Cliente "),e(24,"span",18),r(25,"(Opcional)"),t()(),e(26,"div",19)(27,"input",20),y("ngModelChange",function(u){return c(o),h(n.busquedaCliente,u)||(n.busquedaCliente=u),m(u)}),g("input",function(){return c(o),m(n.filtrarClientes())})("focus",function(){return c(o),m(n.filtrarClientes())}),t(),e(28,"button",21),g("click",function(){return c(o),m(n.abrirModalCliente())}),b(),e(29,"svg",22),x(30,"path",23),t(),r(31," Nuevo "),t()(),C(32,re,2,1,"div",24)(33,ae,4,0,"div",25),t(),f(),e(34,"div")(35,"label",17),r(36,"Comprobante"),t(),e(37,"select",26),y("ngModelChange",function(u){return c(o),h(n.venta.tipo_comprobante,u)||(n.venta.tipo_comprobante=u),m(u)}),e(38,"option"),r(39,"Boleta"),t(),e(40,"option"),r(41,"Factura"),t(),e(42,"option"),r(43,"Nota de Venta"),t()()(),e(44,"div")(45,"label",17),r(46,"N\xB0 Comprobante"),t(),e(47,"input",27),y("ngModelChange",function(u){return c(o),h(n.venta.nro_comprobante,u)||(n.venta.nro_comprobante=u),m(u)}),t()(),e(48,"div")(49,"label",17),r(50,"M\xE9todo de pago"),t(),e(51,"select",28),y("ngModelChange",function(u){return c(o),h(n.venta.metodo_pago,u)||(n.venta.metodo_pago=u),m(u)}),e(52,"option"),r(53,"Efectivo"),t(),e(54,"option"),r(55,"Tarjeta"),t(),e(56,"option"),r(57,"Transferencia"),t(),e(58,"option"),r(59,"Yape"),t(),e(60,"option"),r(61,"Plin"),t()()()()()(),e(62,"div",29)(63,"div",11)(64,"div",12),b(),e(65,"svg",13),x(66,"path",23),t(),f(),e(67,"span"),r(68,"AGREGAR PRODUCTO"),t()()(),e(69,"section",15)(70,"div",30)(71,"div",31)(72,"div",32)(73,"label",33),r(74,"Producto"),t(),e(75,"select",34),y("ngModelChange",function(u){return c(o),h(n.formProducto.id_producto,u)||(n.formProducto.id_producto=u),m(u)}),e(76,"option",35),r(77,"Seleccionar producto..."),t(),C(78,le,2,4,"option",36),t()(),e(79,"div",37)(80,"label",33),r(81,"Cantidad"),t(),e(82,"input",38),y("ngModelChange",function(u){return c(o),h(n.formProducto.cantidad,u)||(n.formProducto.cantidad=u),m(u)}),t()(),e(83,"div",37)(84,"label",33),r(85,"Descuento (S/.)"),t(),e(86,"input",39),y("ngModelChange",function(u){return c(o),h(n.formProducto.descuento,u)||(n.formProducto.descuento=u),m(u)}),t()(),e(87,"div",40)(88,"button",41),g("click",function(){return c(o),m(n.abrirModalBusquedaProducto())}),b(),e(89,"svg",42),x(90,"path",43),t(),r(91," Buscar "),t()(),f(),e(92,"div",40)(93,"button",44),g("click",function(){return c(o),m(n.agregarProducto())}),b(),e(94,"svg",42),x(95,"path",23),t(),r(96," Agregar "),t()()()()(),f(),e(97,"div",11)(98,"div",12),b(),e(99,"svg",13),x(100,"path",6),t(),f(),e(101,"span"),r(102,"CARRITO"),t()(),e(103,"div",45)(104,"div",46),r(105,"Total"),t(),e(106,"div",47),r(107),t()()(),e(108,"section",48),C(109,se,17,1,"table",49)(110,ce,7,0,"ng-template",null,0,L),t(),e(112,"div",50)(113,"div",51)(114,"label",52),r(115,"\xBFAplicar IGV (18%)?"),t(),e(116,"div",53)(117,"input",54),y("ngModelChange",function(u){return c(o),h(n.incluirIGV,u)||(n.incluirIGV=u),m(u)}),g("change",function(){return c(o),m(n.calcularTotal())}),t(),e(118,"span",55),r(119),t()(),C(120,me,4,0,"div",56),t(),e(121,"div",57)(122,"div",58)(123,"span"),r(124,"Subtotal"),t(),e(125,"span"),r(126),t()(),C(127,ue,5,1,"div",59),e(128,"div",60)(129,"span"),r(130,"Total"),t(),e(131,"span",61),r(132),t()()()(),e(133,"div",62)(134,"button",63),g("click",function(){return c(o),m(n.limpiarVenta())}),b(),e(135,"svg",42),x(136,"path",64),t(),r(137," Limpiar "),t(),f(),e(138,"button",65),g("click",function(){return c(o),m(n.procesarVenta())}),b(),e(139,"svg",66),x(140,"path",67),t(),r(141," Procesar Venta "),t(),f(),e(142,"button",68),g("click",function(){return c(o),m(n.generarComprobantePDF())}),b(),e(143,"svg",42),x(144,"path",69),t(),r(145," Generar PDF "),t()()()()(),C(146,pe,47,6,"div",70)(147,_e,17,3,"div",70)}if(i&2){let o=I(111);d(27),v("ngModel",n.busquedaCliente),d(5),_("ngIf",n.busquedaCliente&&n.clientesFiltrados.length>0&&n.venta.id_cliente===0),d(),_("ngIf",n.busquedaCliente&&n.clientesFiltrados.length===0),d(4),v("ngModel",n.venta.tipo_comprobante),d(10),v("ngModel",n.venta.nro_comprobante),d(4),v("ngModel",n.venta.metodo_pago),d(24),v("ngModel",n.formProducto.id_producto),d(),_("value",0),d(2),_("ngForOf",n.productos),d(4),v("ngModel",n.formProducto.cantidad),d(4),v("ngModel",n.formProducto.descuento),d(21),w(" S/. ",(n.venta.total||0).toFixed(2)," "),d(2),_("ngIf",n.carrito.length)("ngIfElse",o),d(8),v("ngModel",n.incluirIGV),d(2),V(n.incluirIGV?"IGV Incluido":"Sin IGV"),d(),_("ngIf",n.incluirIGV&&n.venta.tipo_comprobante==="Nota de Venta"),d(6),w("S/. ",(n.base_imponible||0).toFixed(2),""),d(),_("ngIf",n.incluirIGV),d(5),w("S/. ",(n.venta.total||0).toFixed(2),""),d(10),_("disabled",n.venta.tipo_comprobante==="No desea"||n.carrito.length===0),d(4),_("ngIf",n.mostrarModalCliente),d(),_("ngIf",n.mostrarModalBusquedaProducto)}},dependencies:[G,W,q,K,z,R,D,O,N,A,j,Y,J,U,H],encapsulation:2})};export{te as PosComponent};
