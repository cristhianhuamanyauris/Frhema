import{a as P}from"./chunk-ZCVIYW7F.js";import{a as N}from"./chunk-6GPENY6S.js";import{a as O}from"./chunk-BZOVWDEM.js";import{b as V,c as M,f as T,i as D,j as F,k as I,n as W}from"./chunk-WG5PEN7D.js";import"./chunk-5T4VIS3M.js";import{$a as u,Cb as E,Db as w,Ga as h,Gb as R,Ia as c,Ma as e,Na as t,Qa as m,Ra as b,W as v,Wa as n,Xa as f,Ya as x,Za as C,_a as d,ab as g,cb as y,wa as a,xa as _}from"./chunk-V3AN2ELD.js";import{h as S}from"./chunk-FK42CRUA.js";function k(l,s){if(l&1&&(e(0,"option",19),n(1),t()),l&2){let o=s.$implicit;c("value",o.id_cliente),a(),x(" ",o.nombre," ")}}function L(l,s){if(l&1&&(e(0,"option",19),n(1),t()),l&2){let o=s.$implicit;c("value",o.id_usuario),a(),x(" ",o.nombre_usuario," ")}}function B(l,s){if(l&1&&(e(0,"tr",20)(1,"td",21),n(2),t(),e(3,"td",21),n(4),t(),e(5,"td",21),n(6),t(),e(7,"td",21),n(8),t(),e(9,"td",22),n(10),t(),e(11,"td",21),n(12),t()()),l&2){let o=s.$implicit,i=b();a(2),f(i.formatFecha(o.fecha)),a(2),f((o.clientes==null?null:o.clientes.nombre)||"---"),a(2),f((o.clientes==null?null:o.clientes.documento)||"---"),a(2),C(" ",o.tipo_comprobante," ",o.nro_comprobante," "),a(2),x("S/ ",o.total,""),a(2),f(o.usuarios==null?null:o.usuarios.nombre_usuario)}}function j(l,s){l&1&&(e(0,"tr")(1,"td",23),n(2," No hay ventas para los filtros seleccionados "),t()())}var A=class l{constructor(s,o,i){this.ventasService=s;this.clientesService=o;this.usuariosService=i}ventas=[];clientes=[];usuarios=[];filtros={fecha_inicio:"",fecha_fin:"",id_cliente:"",id_usuario:"",tipo_comprobante:""};ngOnInit(){return S(this,null,function*(){this.clientes=yield this.clientesService.getClientes(),this.usuarios=yield this.usuariosService.getUsuarios(),yield this.cargarReporte()})}cargarReporte(){return S(this,null,function*(){let s={fecha_inicio:this.filtros.fecha_inicio||void 0,fecha_fin:this.filtros.fecha_fin||void 0,id_cliente:this.filtros.id_cliente?Number(this.filtros.id_cliente):void 0,id_usuario:this.filtros.id_usuario||void 0,tipo_comprobante:this.filtros.tipo_comprobante||void 0};this.ventas=yield this.ventasService.getReporteVentas(s)})}formatFecha(s){return new Date(s).toLocaleString()}exportarPDF(){console.log("Exportar PDF a\xFAn no implementado")}exportarExcel(){console.log("Exportar Excel a\xFAn no implementado")}static \u0275fac=function(o){return new(o||l)(_(O),_(N),_(P))};static \u0275cmp=v({type:l,selectors:[["app-ventas-reporte"]],standalone:!0,features:[y],decls:64,vars:9,consts:[[1,"text-2xl","font-bold","text-gray-800","mb-6","flex","items-center","gap-2"],[1,"bg-white","p-5","rounded-xl","shadow-md","border","border-gray-200","mb-6"],[1,"text-sm","font-semibold","text-gray-500","mb-3","uppercase","tracking-wide"],[1,"grid","grid-cols-1","sm:grid-cols-3","lg:grid-cols-5","gap-4"],[1,"flex","flex-col"],[1,"text-sm","font-medium","text-gray-700","mb-1"],["type","date",1,"border","rounded-lg","px-3","py-2","text-sm","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","change","ngModel"],[1,"border","rounded-lg","px-3","py-2","text-sm","bg-white","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","gap-3","mb-6"],[1,"px-4","py-2","rounded-lg","bg-red-600","text-white","font-medium","text-sm","hover:bg-red-700","transition",3,"click"],[1,"px-4","py-2","rounded-lg","bg-green-600","text-white","font-medium","text-sm","hover:bg-green-700","transition",3,"click"],[1,"overflow-x-auto","bg-white","shadow-lg","border","border-gray-200","rounded-xl"],[1,"w-full","text-sm"],[1,"bg-gray-100","text-gray-700","uppercase","text-xs"],[1,"px-4","py-3","text-left"],["class","border-b hover:bg-gray-50 transition",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[1,"border-b","hover:bg-gray-50","transition"],[1,"px-4","py-3"],[1,"px-4","py-3","font-semibold"],["colspan","6",1,"text-center","text-gray-500","py-6","text-sm"]],template:function(o,i){o&1&&(e(0,"h2",0),n(1,` \u{1F4CA} Reporte de Ventas
`),t(),e(2,"div",1)(3,"h3",2),n(4,"Filtros"),t(),e(5,"div",3)(6,"div",4)(7,"label",5),n(8,"Desde"),t(),e(9,"input",6),g("ngModelChange",function(r){return u(i.filtros.fecha_inicio,r)||(i.filtros.fecha_inicio=r),r}),m("change",function(){return i.cargarReporte()}),t()(),e(10,"div",4)(11,"label",5),n(12,"Hasta"),t(),e(13,"input",6),g("ngModelChange",function(r){return u(i.filtros.fecha_fin,r)||(i.filtros.fecha_fin=r),r}),m("change",function(){return i.cargarReporte()}),t()(),e(14,"div",4)(15,"label",5),n(16,"Cliente"),t(),e(17,"select",7),g("ngModelChange",function(r){return u(i.filtros.id_cliente,r)||(i.filtros.id_cliente=r),r}),m("change",function(){return i.cargarReporte()}),e(18,"option",8),n(19,"Todos"),t(),h(20,k,2,2,"option",9),t()(),e(21,"div",4)(22,"label",5),n(23,"Cajero"),t(),e(24,"select",7),g("ngModelChange",function(r){return u(i.filtros.id_usuario,r)||(i.filtros.id_usuario=r),r}),m("change",function(){return i.cargarReporte()}),e(25,"option",8),n(26,"Todos"),t(),h(27,L,2,2,"option",9),t()(),e(28,"div",4)(29,"label",5),n(30,"Comprobante"),t(),e(31,"select",7),g("ngModelChange",function(r){return u(i.filtros.tipo_comprobante,r)||(i.filtros.tipo_comprobante=r),r}),m("change",function(){return i.cargarReporte()}),e(32,"option",8),n(33,"Todos"),t(),e(34,"option"),n(35,"BOLETA"),t(),e(36,"option"),n(37,"FACTURA"),t(),e(38,"option"),n(39,"NOTA DE VENTA"),t()()()()(),e(40,"div",10)(41,"button",11),m("click",function(){return i.exportarPDF()}),n(42," \u{1F4C4} Exportar PDF "),t(),e(43,"button",12),m("click",function(){return i.exportarExcel()}),n(44," \u{1F4CA} Exportar Excel "),t()(),e(45,"div",13)(46,"table",14)(47,"thead",15)(48,"tr")(49,"th",16),n(50,"Fecha"),t(),e(51,"th",16),n(52,"Cliente"),t(),e(53,"th",16),n(54,"Documento"),t(),e(55,"th",16),n(56,"Comprobante"),t(),e(57,"th",16),n(58,"Total"),t(),e(59,"th",16),n(60,"Cajero"),t()()(),e(61,"tbody"),h(62,B,13,7,"tr",17)(63,j,3,0,"tr",18),t()()()),o&2&&(a(9),d("ngModel",i.filtros.fecha_inicio),a(4),d("ngModel",i.filtros.fecha_fin),a(4),d("ngModel",i.filtros.id_cliente),a(3),c("ngForOf",i.clientes),a(4),d("ngModel",i.filtros.id_usuario),a(3),c("ngForOf",i.usuarios),a(4),d("ngModel",i.filtros.tipo_comprobante),a(31),c("ngForOf",i.ventas),a(),c("ngIf",i.ventas.length===0))},dependencies:[R,E,w,W,F,I,V,D,M,T],encapsulation:2})};export{A as VentasReporteComponent};
