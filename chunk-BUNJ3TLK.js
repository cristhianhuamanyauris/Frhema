import{a as K}from"./chunk-6GPENY6S.js";import{b as W,c as D,d as G,e as z,f as O,g as P,i as q,j as A,k as R,m as U,n as J}from"./chunk-WG5PEN7D.js";import"./chunk-5T4VIS3M.js";import{$a as C,Cb as B,Db as H,Ga as v,Gb as j,Ia as f,Ka as L,Ma as e,Na as t,Oa as x,Pa as w,Qa as b,Ra as p,Va as T,W as k,Wa as r,Xa as h,Ya as I,_a as _,ab as y,ca as m,cb as F,da as c,ea as u,fa as g,ib as N,wa as a,xa as V}from"./chunk-V3AN2ELD.js";import{a as M,h as S}from"./chunk-FK42CRUA.js";function X(d,l){if(d&1){let i=w();e(0,"div",21)(1,"button",22),b("click",function(){m(i);let n=p();return c(n.nuevoCliente())}),u(),e(2,"svg",23),x(3,"path",24),t(),g(),e(4,"span"),r(5,"NUEVO CLIENTE"),t()()()}}function Y(d,l){d&1&&(e(0,"div",25),r(1,"Cargando clientes..."),t())}function Z(d,l){if(d&1){let i=w();e(0,"tr",29)(1,"td",30),r(2),t(),e(3,"td",31),r(4),t(),e(5,"td",32)(6,"span",33),r(7),t()(),e(8,"td",30),r(9),t(),e(10,"td",30),r(11),t(),e(12,"td",30),r(13),t(),e(14,"td",32)(15,"div",34)(16,"button",35),b("click",function(){let n=m(i).$implicit,s=p(2);return c(s.editarCliente(n))}),u(),e(17,"svg",36),x(18,"path",37),t(),g(),e(19,"span"),r(20,"Editar"),t()(),e(21,"button",38),b("click",function(){let n=m(i).$implicit,s=p(2);return c(s.eliminarCliente(n.id_cliente))}),u(),e(22,"svg",36),x(23,"path",39),t(),g(),e(24,"span"),r(25,"Eliminar"),t()()()()()}if(d&2){let i=l.$implicit;a(2),h(i.id_cliente),a(2),h(i.nombre),a(2),L("bg-blue-100",i.tipo==="natural")("text-blue-700",i.tipo==="natural")("bg-orange-100",i.tipo==="empresa")("text-orange-700",i.tipo==="empresa"),a(),I(" ",i.tipo||"-"," "),a(2),h(i.documento||"-"),a(2),h(i.telefono||"-"),a(2),h(i.direccion||"-")}}function $(d,l){if(d&1&&(e(0,"table",26)(1,"thead")(2,"tr")(3,"th",27),r(4,"ID"),t(),e(5,"th",27),r(6,"Nombre"),t(),e(7,"th",27),r(8,"Tipo"),t(),e(9,"th",27),r(10,"Documento"),t(),e(11,"th",27),r(12,"Tel\xE9fono"),t(),e(13,"th",27),r(14,"Direcci\xF3n"),t(),e(15,"th",27),r(16,"Acciones"),t()()(),e(17,"tbody"),v(18,Z,26,14,"tr",28),t()()),d&2){let i=p();a(18),f("ngForOf",i.clientesFiltrados)}}function ee(d,l){if(d&1){let i=w();e(0,"button",45),b("click",function(){m(i);let n=p(2);return c(n.nuevoCliente())}),u(),e(1,"svg",23),x(2,"path",24),t(),g(),e(3,"span"),r(4,"Nuevo Cliente"),t()()}}function te(d,l){if(d&1&&(e(0,"div",40),u(),e(1,"svg",41),x(2,"path",6),t(),g(),e(3,"h3",42),r(4,"No hay clientes registrados"),t(),e(5,"p",43),r(6,"Crea uno con el bot\xF3n "),e(7,"b"),r(8,"Nuevo Cliente"),t(),r(9,"."),t(),v(10,ee,5,0,"button",44),t()),d&2){let i=p();a(10),f("ngIf",!i.modoEdicion)}}function ie(d,l){if(d&1){let i=w();e(0,"div",46),b("click",function(n){m(i);let s=p();return c(s.cerrarModal(n))}),e(1,"div",47),b("click",function(n){return m(i),c(n.stopPropagation())}),e(2,"div",48)(3,"div",4),u(),e(4,"svg",49),x(5,"path",50),t(),g(),e(6,"h3",51),r(7),t()(),e(8,"button",52),b("click",function(){m(i);let n=p();return c(n.cerrarModalDirecto())}),u(),e(9,"svg",53),x(10,"path",54),t()()(),g(),e(11,"form",55),b("ngSubmit",function(){m(i);let n=p();return c(n.guardarCliente())}),e(12,"div",56)(13,"div",57)(14,"label",58),r(15,"Nombre "),e(16,"span",59),r(17,"*"),t()(),e(18,"input",60),y("ngModelChange",function(n){m(i);let s=p();return C(s.cliente.nombre,n)||(s.cliente.nombre=n),c(n)}),t()(),e(19,"div",57)(20,"label",58),r(21,"Tipo"),t(),e(22,"select",61),y("ngModelChange",function(n){m(i);let s=p();return C(s.cliente.tipo,n)||(s.cliente.tipo=n),c(n)}),e(23,"option",62),r(24,"-- Seleccione --"),t(),e(25,"option",63),r(26,"Natural"),t(),e(27,"option",64),r(28,"Empresa"),t()()(),e(29,"div",57)(30,"label",58),r(31,"Documento"),t(),e(32,"input",65),y("ngModelChange",function(n){m(i);let s=p();return C(s.cliente.documento,n)||(s.cliente.documento=n),c(n)}),t()(),e(33,"div",57)(34,"label",58),r(35,"Tel\xE9fono"),t(),e(36,"input",66),y("ngModelChange",function(n){m(i);let s=p();return C(s.cliente.telefono,n)||(s.cliente.telefono=n),c(n)}),t()(),e(37,"div",67)(38,"label",58),r(39,"Direcci\xF3n"),t(),e(40,"input",68),y("ngModelChange",function(n){m(i);let s=p();return C(s.cliente.direccion,n)||(s.cliente.direccion=n),c(n)}),t()()(),e(41,"div",69)(42,"button",70),b("click",function(){m(i);let n=p();return c(n.cerrarModalDirecto())}),u(),e(43,"svg",23),x(44,"path",54),t(),g(),e(45,"span"),r(46,"Cancelar"),t()(),e(47,"button",71),u(),e(48,"svg",23),x(49,"path",72),t(),g(),e(50,"span"),r(51),t()()()()()()}if(d&2){let i=p();a(7),h(i.modoEdicion?"Editar Cliente":"Nuevo Cliente"),a(11),_("ngModel",i.cliente.nombre),a(4),_("ngModel",i.cliente.tipo),a(),f("ngValue",null),a(9),_("ngModel",i.cliente.documento),a(4),_("ngModel",i.cliente.telefono),a(4),_("ngModel",i.cliente.direccion),a(11),h((i.modoEdicion,"Guardar cliente"))}}var Q=class d{constructor(l){this.clientesService=l}clientes=[];clientesFiltrados=[];loading=!0;terminoBusqueda="";mostrarFormulario=!1;modoEdicion=!1;cliente=this.getEmptyCliente();ngOnInit(){this.cargarClientes()}getEmptyCliente(){return{nombre:"",tipo:null,documento:"",telefono:"",direccion:""}}cargarClientes(){return S(this,null,function*(){this.loading=!0,this.clientes=yield this.clientesService.getClientes(),this.filtrarClientes(),this.loading=!1})}filtrarClientes(){if(!this.terminoBusqueda.trim())this.clientesFiltrados=this.clientes;else{let l=this.terminoBusqueda.toLowerCase();this.clientesFiltrados=this.clientes.filter(i=>i.nombre?.toLowerCase().includes(l)||i.documento?.toLowerCase().includes(l)||i.telefono?.toLowerCase().includes(l)||i.direccion?.toLowerCase().includes(l))}}nuevoCliente(){this.modoEdicion=!1,this.mostrarFormulario=!0,this.cliente=this.getEmptyCliente()}editarCliente(l){this.modoEdicion=!0,this.mostrarFormulario=!0,this.cliente=M({},l)}cerrarModalDirecto(){this.mostrarFormulario=!1,this.modoEdicion=!1,this.cliente=this.getEmptyCliente()}cerrarModal(l){l.target?.classList?.contains("fixed")&&this.cerrarModalDirecto()}guardarCliente(){return S(this,null,function*(){try{this.modoEdicion&&this.cliente.id_cliente?(yield this.clientesService.updateCliente(this.cliente.id_cliente,this.cliente),alert("Cliente actualizado")):(yield this.clientesService.addCliente(this.cliente),alert("Cliente registrado")),this.cerrarModalDirecto(),this.cargarClientes()}catch(l){alert("Error al guardar"),console.error(l)}})}eliminarCliente(l){return S(this,null,function*(){if(confirm("\xBFEliminar cliente?"))try{yield this.clientesService.deleteCliente(l),this.cargarClientes()}catch{alert("Error al eliminar")}})}static \u0275fac=function(i){return new(i||d)(V(K))};static \u0275cmp=k({type:d,selectors:[["app-clientes-list"]],standalone:!0,features:[F],decls:28,vars:6,consts:[["sinDatos",""],[1,"w-full","max-w-[1200px]","mx-auto","flex","flex-col","px-2","md:px-3","pb-2"],[1,"flex","items-start","justify-between","gap-4","px-0","py-3","pb-2","bg-transparent","border-none","shadow-none"],[1,"flex-1"],[1,"flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"m-0","text-2xl","font-semibold","text-gray-900","tracking-wide"],[1,"mt-1","mb-0","text-sm","text-gray-600"],[1,"flex","items-center","justify-between","px-0","py-1.5","mb-1.5","border-b","border-gray-200"],[1,"flex","items-center","text-gray-900","text-xs","font-semibold","uppercase","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"],["class","flex items-center gap-2",4,"ngIf"],[1,"px-0","pb-2"],[1,"flex","items-center","gap-2","text-sm","text-gray-900","font-medium"],["type","search","placeholder","",1,"px-3","py-1.5","border","border-gray-300","rounded","text-sm","text-gray-900","bg-white","outline-none","transition-all","focus:border-blue-600","focus:ring-1","focus:ring-blue-600",3,"ngModelChange","ngModel"],[1,"rounded-none","border-none","bg-transparent","overflow-auto","shadow-none","px-0","pb-2"],["class","p-6 text-center text-gray-500",4,"ngIf"],["class","w-full border-collapse min-w-[960px]",4,"ngIf","ngIfElse"],["class","fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-[2000]",3,"click",4,"ngIf"],[1,"flex","items-center","gap-2"],["type","button",1,"flex","items-center","justify-center","gap-2","px-2","py-2","text-xs","font-semibold","bg-blue-600","text-white","border-none","rounded-lg","shadow-md","hover:bg-blue-700","hover:shadow-lg","transition-all","uppercase","cursor-pointer",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"p-6","text-center","text-gray-500"],[1,"w-full","border-collapse","min-w-[960px]"],[1,"text-left","text-xs","tracking-wider","uppercase","text-gray-600","py-3.5","px-4","bg-transparent","sticky","top-0","border-b","border-gray-200","font-semibold"],["class","hover:bg-blue-50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-blue-50","transition-colors"],[1,"py-4","px-4","border-b","border-gray-100","align-middle","text-gray-600","text-sm"],[1,"py-4","px-4","border-b","border-gray-100","align-middle","text-gray-900","text-sm","font-semibold"],[1,"py-4","px-4","border-b","border-gray-100","align-middle"],[1,"px-2","py-1","rounded-full","text-xs","font-medium"],[1,"flex","gap-2.5","justify-end"],["title","Editar",1,"border","border-gray-300","bg-white","text-gray-900","rounded-lg","px-3.5","py-2","cursor-pointer","inline-flex","items-center","gap-2","transition-all","hover:-translate-y-0.5","hover:bg-gray-50","hover:border-gray-400","hover:shadow","text-xs","font-medium","whitespace-nowrap",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["title","Eliminar",1,"border","border-red-300","bg-red-50","text-red-700","rounded-lg","px-3.5","py-2","cursor-pointer","inline-flex","items-center","gap-2","transition-all","hover:-translate-y-0.5","hover:bg-red-100","hover:border-red-400","hover:shadow","text-xs","font-medium","whitespace-nowrap",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"py-12","px-6","text-center","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4","text-blue-600"],[1,"m-0","mb-2","text-gray-900","font-semibold"],[1,"m-0","mb-6","text-gray-600"],["type","button","class","inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white border border-blue-600 rounded-lg cursor-pointer font-medium text-sm transition-all hover:-translate-y-0.5 hover:bg-blue-700 hover:border-blue-700 hover:shadow-md",3,"click",4,"ngIf"],["type","button",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-blue-600","text-white","border","border-blue-600","rounded-lg","cursor-pointer","font-medium","text-sm","transition-all","hover:-translate-y-0.5","hover:bg-blue-700","hover:border-blue-700","hover:shadow-md",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","backdrop-blur-sm","flex","items-center","justify-center","p-4","z-[2000]",3,"click"],[1,"w-full","max-w-[640px]","rounded-xl","overflow-hidden","border","border-gray-200","bg-white","shadow-lg","max-h-[85vh]","flex","flex-col",3,"click"],[1,"flex","items-center","justify-between","px-5","py-4","border-b","border-gray-200","bg-white","flex-shrink-0"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4.5","h-4.5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"m-0","text-lg","font-semibold","text-gray-900"],["type","button","title","Cerrar",1,"border-none","bg-transparent","text-gray-600","text-xl","cursor-pointer","p-2","rounded-md","flex","items-center","justify-center","transition-all","hover:bg-gray-100","hover:text-gray-900",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-5","py-4","bg-white","overflow-y-auto","flex-1",3,"ngSubmit"],[1,"grid","grid-cols-2","gap-3","mb-3"],[1,"mb-0"],[1,"block","mb-2","text-gray-900","text-sm","font-medium","leading-6"],[1,"text-red-500"],["type","text","name","nombre","required","",1,"w-full","px-2.5","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","outline-none","text-sm","transition-all","box-border","focus:border-blue-600","focus:bg-white","focus:ring-3","focus:ring-blue-100","hover:border-gray-400",3,"ngModelChange","ngModel"],["name","tipo",1,"w-full","px-2.5","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","outline-none","text-sm","transition-all","box-border","focus:border-blue-600","focus:bg-white","focus:ring-3","focus:ring-blue-100","hover:border-gray-400",3,"ngModelChange","ngModel"],[3,"ngValue"],["value","natural"],["value","empresa"],["type","text","name","documento",1,"w-full","px-2.5","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","outline-none","text-sm","transition-all","box-border","focus:border-blue-600","focus:bg-white","focus:ring-3","focus:ring-blue-100","hover:border-gray-400",3,"ngModelChange","ngModel"],["type","text","name","telefono",1,"w-full","px-2.5","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","outline-none","text-sm","transition-all","box-border","focus:border-blue-600","focus:bg-white","focus:ring-3","focus:ring-blue-100","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"mb-0","col-span-2"],["type","text","name","direccion",1,"w-full","px-2.5","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","outline-none","text-sm","transition-all","box-border","focus:border-blue-600","focus:bg-white","focus:ring-3","focus:ring-blue-100","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"flex","justify-center","gap-2.5","mt-0","pt-4","border-t","border-gray-200","bg-white","flex-shrink-0"],["type","button",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-white","border","border-gray-300","text-gray-900","rounded-lg","cursor-pointer","font-medium","text-sm","transition-all","hover:-translate-y-0.5","hover:bg-gray-50","hover:border-gray-400","hover:shadow-md",3,"click"],["type","submit",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-blue-600","text-white","border","border-blue-600","rounded-lg","cursor-pointer","font-medium","text-sm","transition-all","hover:-translate-y-0.5","hover:bg-blue-700","hover:border-blue-700","hover:shadow-md"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(i,o){if(i&1){let n=w();e(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4),u(),e(4,"svg",5),x(5,"path",6),t(),g(),e(6,"div")(7,"h1",7),r(8,"Gesti\xF3n de Clientes"),t(),e(9,"p",8),r(10,"Administra y organiza tu base de datos de clientes."),t()()()()(),e(11,"div",9)(12,"div",10),u(),e(13,"svg",11),x(14,"path",12),t(),g(),e(15,"span"),r(16,"REGISTROS"),t()(),v(17,X,6,0,"div",13),t(),e(18,"div",14)(19,"label",15),r(20," Search: "),e(21,"input",16),y("ngModelChange",function(E){return m(n),C(o.terminoBusqueda,E)||(o.terminoBusqueda=E),c(E)}),b("ngModelChange",function(){return m(n),c(o.filtrarClientes())}),t()()(),e(22,"section",17),v(23,Y,2,0,"div",18)(24,$,19,1,"table",19)(25,te,11,1,"ng-template",null,0,N),t()(),v(27,ie,52,8,"div",20)}if(i&2){let n=T(26);a(17),f("ngIf",!o.modoEdicion&&!o.mostrarFormulario),a(4),_("ngModel",o.terminoBusqueda),a(2),f("ngIf",o.loading),a(),f("ngIf",!o.loading&&o.clientesFiltrados.length)("ngIfElse",n),a(3),f("ngIf",o.mostrarFormulario||o.modoEdicion)}},dependencies:[j,B,H,J,P,A,R,W,q,D,G,U,O,z],encapsulation:2})};export{Q as ClientesListComponent};
