import{a as d}from"./chunk-5T4VIS3M.js";import{O as n,T as u}from"./chunk-V3AN2ELD.js";import{h as e}from"./chunk-FK42CRUA.js";var l=class c{constructor(o){this.supabase=o}TABLE="productos";getProductos(){return e(this,null,function*(){let{data:o,error:t}=yield this.supabase.client.from(this.TABLE).select("*").order("id_producto",{ascending:!0});if(t)throw t;return o})}addProducto(o){return e(this,null,function*(){let{data:t,error:r}=yield this.supabase.client.from(this.TABLE).insert([o]).select().single();if(r)throw r;return t})}updateProducto(o,t){return e(this,null,function*(){let{data:r,error:a}=yield this.supabase.client.from(this.TABLE).update(t).eq("id_producto",o).select().single();if(a)throw a;return r})}deleteProducto(o){return e(this,null,function*(){let{error:t}=yield this.supabase.client.from(this.TABLE).delete().eq("id_producto",o);if(t)throw t;return!0})}getProductosStockCritico(o){return e(this,null,function*(){let t=this.supabase.client.from(this.TABLE).select("*");o!==void 0?t=t.lte("stock_actual",o):t=t.lte("stock_actual",3);let{data:r,error:a}=yield t.order("stock_actual",{ascending:!0}).limit(20);if(a)throw a;return r.filter(s=>{let p=s.stock_actual||0,i=s.stock_minimo||0,f=o!==void 0?o:i>0?i:3;return p<=f})})}static \u0275fac=function(t){return new(t||c)(u(d))};static \u0275prov=n({token:c,factory:c.\u0275fac,providedIn:"root"})};export{l as a};
