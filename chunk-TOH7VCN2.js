import{a as A}from"./chunk-J7HEDGMY.js";import{a as L}from"./chunk-TPAMHFB4.js";import"./chunk-5J2A4TKV.js";import{b as k,c as U,d as R,e as W,f as j,g as N,m as T,n as I,p as B}from"./chunk-BIJEMQVT.js";import"./chunk-M2GT5SNT.js";import{$a as d,Eb as M,Ga as v,Hb as E,Ia as h,Ma as e,Na as t,Oa as c,Qa as _,Ra as w,W as S,Wa as n,Xa as x,ab as m,bb as u,db as C,ea as g,fa as b,wa as o,xa as f}from"./chunk-SFQMZB6G.js";import{h as y}from"./chunk-FK42CRUA.js";function P(s,a){if(s&1&&(e(0,"div",22),g(),e(1,"svg",23),c(2,"path",24),t(),b(),e(3,"span",25),n(4),t()()),s&2){let l=w();o(4),x(l.mensaje)}}function q(s,a){if(s&1&&(e(0,"div",26),g(),e(1,"svg",27),c(2,"path",28),t(),b(),e(3,"span",29),n(4),t()()),s&2){let l=w();o(4),x(l.error)}}var V=class s{constructor(a,l){this.authService=a;this.usuariosService=l}email="";password="";nombre_usuario="";nombre="";apellido="";mensaje="";error="";registrar(){return y(this,null,function*(){this.mensaje="",this.error="";try{let{user:a}=yield this.authService.registerInternal(this.email,this.password);if(!a)throw new Error("Error al crear usuario en auth.");yield this.usuariosService.crearPerfil({id_usuario:a.id,nombre_usuario:this.nombre_usuario,nombre:this.nombre,apellido:this.apellido,id_rol:null}),this.mensaje="Usuario registrado correctamente. Ahora el administrador debe asignar el rol.",this.email=this.password=this.nombre_usuario=this.nombre=this.apellido=""}catch(a){this.error=a.message||"Error desconocido."}})}static \u0275fac=function(l){return new(l||s)(f(L),f(A))};static \u0275cmp=S({type:s,selectors:[["app-registrar-usuario"]],standalone:!0,features:[C],decls:49,vars:7,consts:[[1,"p-4","md:p-6","space-y-6"],[1,"text-2xl","font-bold","text-gray-800","flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"text-gray-600","mt-1"],["class","p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",4,"ngIf"],["class","p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",4,"ngIf"],[1,"bg-white","p-5","rounded-xl","shadow-sm","border","border-gray-200"],[1,"space-y-5",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-5"],[1,"flex","flex-col"],[1,"text-sm","font-medium","text-gray-700","mb-1"],[1,"text-red-500"],["type","email","name","email","required","","placeholder","ejemplo@correo.com",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","password","name","password","required","","minlength","6","placeholder","M\xEDnimo 6 caracteres",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","text","name","nombre_usuario","required","","placeholder","ej: CAJERO03",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","text","name","nombre","required","","placeholder","Nombres",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","text","name","apellido","required","","placeholder","Apellidos",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","items-center","gap-3","pt-2"],["type","submit",1,"flex","items-center","gap-2","px-6","py-2.5","bg-blue-600","text-white","font-semibold","rounded-lg","hover:bg-blue-700","transition-colors","shadow-sm"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"p-4","bg-green-50","border","border-green-200","rounded-lg","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-green-600","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-green-700","font-medium"],[1,"p-4","bg-red-50","border","border-red-200","rounded-lg","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","text-red-700","font-medium"]],template:function(l,i){l&1&&(e(0,"div",0)(1,"div")(2,"h1",1),g(),e(3,"svg",2),c(4,"path",3),t(),n(5," Registrar Nuevo Usuario "),t(),b(),e(6,"p",4),n(7,"Crea un nuevo usuario en el sistema y asigna su rol posteriormente."),t()(),v(8,P,5,1,"div",5)(9,q,5,1,"div",6),e(10,"div",7)(11,"form",8),_("ngSubmit",function(){return i.registrar()}),e(12,"div",9)(13,"div",10)(14,"label",11),n(15,"Correo electr\xF3nico "),e(16,"span",12),n(17,"*"),t()(),e(18,"input",13),u("ngModelChange",function(r){return m(i.email,r)||(i.email=r),r}),t()(),e(19,"div",10)(20,"label",11),n(21,"Contrase\xF1a "),e(22,"span",12),n(23,"*"),t()(),e(24,"input",14),u("ngModelChange",function(r){return m(i.password,r)||(i.password=r),r}),t()()(),e(25,"div",9)(26,"div",10)(27,"label",11),n(28,"Nombre de Usuario "),e(29,"span",12),n(30,"*"),t()(),e(31,"input",15),u("ngModelChange",function(r){return m(i.nombre_usuario,r)||(i.nombre_usuario=r),r}),t()(),e(32,"div",10)(33,"label",11),n(34,"Nombre "),e(35,"span",12),n(36,"*"),t()(),e(37,"input",16),u("ngModelChange",function(r){return m(i.nombre,r)||(i.nombre=r),r}),t()()(),e(38,"div",10)(39,"label",11),n(40,"Apellido "),e(41,"span",12),n(42,"*"),t()(),e(43,"input",17),u("ngModelChange",function(r){return m(i.apellido,r)||(i.apellido=r),r}),t()(),e(44,"div",18)(45,"button",19),g(),e(46,"svg",20),c(47,"path",21),t(),n(48," Registrar Usuario "),t()()()()()),l&2&&(o(8),h("ngIf",i.mensaje),o(),h("ngIf",i.error),o(9),d("ngModel",i.email),o(6),d("ngModel",i.password),o(7),d("ngModel",i.nombre_usuario),o(6),d("ngModel",i.nombre),o(6),d("ngModel",i.apellido))},dependencies:[E,M,B,N,k,U,R,T,I,j,W],encapsulation:2})};export{V as RegistrarUsuarioComponent};
