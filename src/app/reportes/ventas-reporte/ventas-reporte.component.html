<h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
  ðŸ“Š Reporte de Ventas
</h2>

<!-- FILTROS -->
<div class="bg-white p-5 rounded-xl shadow-md border border-gray-200 mb-6">
  <h3 class="text-sm font-semibold text-gray-500 mb-3 uppercase tracking-wide">Filtros</h3>

  <div class="grid grid-cols-1 sm:grid-cols-3 lg:grid-cols-5 gap-4">

    <!-- Desde -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">Desde</label>
      <input 
        type="date" 
        [(ngModel)]="filtros.fecha_inicio" 
        (change)="cargarReporte()"
        class="border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
      />
    </div>

    <!-- Hasta -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">Hasta</label>
      <input 
        type="date" 
        [(ngModel)]="filtros.fecha_fin" 
        (change)="cargarReporte()"
        class="border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none"
      />
    </div>

    <!-- Cliente -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">Cliente</label>
      <select 
        [(ngModel)]="filtros.id_cliente" 
        (change)="cargarReporte()"
        class="border rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
      >
        <option value="">Todos</option>
        <option *ngFor="let c of clientes" [value]="c.id_cliente">
          {{ c.nombre }}
        </option>
      </select>
    </div>

    <!-- Cajero -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">Cajero</label>
      <select 
        [(ngModel)]="filtros.id_usuario" 
        (change)="cargarReporte()"
        class="border rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
      >
        <option value="">Todos</option>
        <option *ngFor="let u of usuarios" [value]="u.id_usuario">
          {{ u.nombre_usuario }}
        </option>
      </select>
    </div>

    <!-- Tipo Comprobante -->
    <div class="flex flex-col">
      <label class="text-sm font-medium text-gray-700 mb-1">Comprobante</label>
      <select 
        [(ngModel)]="filtros.tipo_comprobante" 
        (change)="cargarReporte()"
        class="border rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:outline-none"
      >
        <option value="">Todos</option>
        <option>BOLETA</option>
        <option>FACTURA</option>
        <option>NOTA DE VENTA</option>
      </select>
    </div>

  </div>
</div>

<!-- BOTONES -->
<div class="flex gap-3 mb-6">
  <button
    (click)="exportarPDF()"
    class="px-4 py-2 rounded-lg bg-red-600 text-white font-medium text-sm hover:bg-red-700 transition"
  >
    ðŸ“„ Exportar PDF
  </button>

  <button
    (click)="exportarExcel()"
    class="px-4 py-2 rounded-lg bg-green-600 text-white font-medium text-sm hover:bg-green-700 transition"
  >
    ðŸ“Š Exportar Excel
  </button>
</div>

<!-- TABLA -->
<div class="overflow-x-auto bg-white shadow-lg border border-gray-200 rounded-xl">
  <table class="w-full text-sm">
    
    <thead class="bg-gray-100 text-gray-700 uppercase text-xs">
      <tr>
        <th class="px-4 py-3 text-left">Fecha</th>
        <th class="px-4 py-3 text-left">Cliente</th>
        <th class="px-4 py-3 text-left">Documento</th>
        <th class="px-4 py-3 text-left">Comprobante</th>
        <th class="px-4 py-3 text-left">Total</th>
        <th class="px-4 py-3 text-left">Cajero</th>
      </tr>
    </thead>

    <tbody>
      <tr 
        *ngFor="let v of ventas"
        class="border-b hover:bg-gray-50 transition"
      >
        <td class="px-4 py-3">{{ formatFecha(v.fecha) }}</td>
        <td class="px-4 py-3">{{ v.clientes?.nombre || '---' }}</td>
        <td class="px-4 py-3">{{ v.clientes?.documento || '---' }}</td>
        <td class="px-4 py-3">
          {{ v.tipo_comprobante }} {{ v.nro_comprobante }}
        </td>
        <td class="px-4 py-3 font-semibold">S/ {{ v.total }}</td>
        <td class="px-4 py-3">{{ v.usuarios?.nombre_usuario }}</td>
      </tr>

      <tr *ngIf="ventas.length === 0">
        <td colspan="6" class="text-center text-gray-500 py-6 text-sm">
          No hay ventas para los filtros seleccionados
        </td>
      </tr>

    </tbody>
  </table>
</div>
