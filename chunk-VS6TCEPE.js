import{a as q}from"./chunk-ZJ5CSXJS.js";import{a as P}from"./chunk-ZAGVFKUM.js";import"./chunk-6ZH3RLRT.js";import{b as U,c as R,d as W,e as N,f as I,g as j,m as T,n as A,o as L}from"./chunk-SMCZ5Z56.js";import"./chunk-5T4VIS3M.js";import{$a as u,Db as x,Ga as C,Gb as E,Ia as c,Ma as t,Na as i,Oa as S,Qa as M,Ra as f,W as y,Wa as n,Ya as b,_a as d,ab as m,cb as v,ea as _,fa as w,wa as o,xa as p}from"./chunk-V3AN2ELD.js";import{h}from"./chunk-FK42CRUA.js";function F(s,a){if(s&1&&(t(0,"div",14),n(1),i()),s&2){let l=f();o(),b(" ",l.mensaje," ")}}function k(s,a){if(s&1&&(t(0,"div",15),n(1),i()),s&2){let l=f();o(),b(" ",l.error," ")}}var B=class s{constructor(a,l){this.authService=a;this.usuariosService=l}email="";password="";nombre_usuario="";nombre="";apellido="";mensaje="";error="";registrar(){return h(this,null,function*(){this.mensaje="",this.error="";try{let{user:a}=yield this.authService.registerInternal(this.email,this.password);if(!a)throw new Error("Error al crear usuario en auth.");yield this.usuariosService.crearPerfil({id_usuario:a.id,nombre_usuario:this.nombre_usuario,nombre:this.nombre,apellido:this.apellido,id_rol:null}),this.mensaje="Usuario registrado correctamente. Ahora el administrador debe asignar el rol.",this.email=this.password=this.nombre_usuario=this.nombre=this.apellido=""}catch(a){this.error=a.message||"Error desconocido."}})}static \u0275fac=function(l){return new(l||s)(p(P),p(q))};static \u0275cmp=y({type:s,selectors:[["app-registrar-usuario"]],standalone:!0,features:[v],decls:30,vars:7,consts:[[1,"max-w-lg","mx-auto","mt-8","bg-white","p-6","rounded-xl","shadow"],[1,"text-2xl","font-bold","text-gray-800","mb-4","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],["class","mb-4 p-3 bg-green-100 text-green-700 rounded-lg",4,"ngIf"],["class","mb-4 p-3 bg-red-100 text-red-700 rounded-lg",4,"ngIf"],[1,"space-y-4",3,"ngSubmit"],[1,"block","text-sm","font-medium","text-gray-700"],["type","email","name","email","required","","placeholder","ejemplo@correo.com",1,"mt-1","w-full","px-3","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["type","password","name","password","required","","minlength","6","placeholder","M\xEDnimo 6 caracteres",1,"mt-1","w-full","px-3","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["type","text","name","nombre_usuario","required","","placeholder","ej: CAJERO03",1,"mt-1","w-full","px-3","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["type","text","name","nombre","required","","placeholder","Nombres",1,"mt-1","w-full","px-3","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["type","text","name","apellido","required","","placeholder","Apellidos",1,"mt-1","w-full","px-3","py-2","rounded-lg","border","border-gray-300","focus:ring-2","focus:ring-blue-500","focus:outline-none",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","py-2","bg-blue-600","text-white","font-semibold","rounded-lg","hover:bg-blue-700","transition"],[1,"mb-4","p-3","bg-green-100","text-green-700","rounded-lg"],[1,"mb-4","p-3","bg-red-100","text-red-700","rounded-lg"]],template:function(l,r){l&1&&(t(0,"div",0)(1,"h2",1),_(),t(2,"svg",2),S(3,"path",3),i(),n(4," Registrar Nuevo Usuario "),i(),C(5,F,2,1,"div",4)(6,k,2,1,"div",5),w(),t(7,"form",6),M("ngSubmit",function(){return r.registrar()}),t(8,"div")(9,"label",7),n(10,"Correo electr\xF3nico"),i(),t(11,"input",8),m("ngModelChange",function(e){return u(r.email,e)||(r.email=e),e}),i()(),t(12,"div")(13,"label",7),n(14,"Contrase\xF1a"),i(),t(15,"input",9),m("ngModelChange",function(e){return u(r.password,e)||(r.password=e),e}),i()(),t(16,"div")(17,"label",7),n(18,"Nombre de Usuario"),i(),t(19,"input",10),m("ngModelChange",function(e){return u(r.nombre_usuario,e)||(r.nombre_usuario=e),e}),i()(),t(20,"div")(21,"label",7),n(22,"Nombre"),i(),t(23,"input",11),m("ngModelChange",function(e){return u(r.nombre,e)||(r.nombre=e),e}),i()(),t(24,"div")(25,"label",7),n(26,"Apellido"),i(),t(27,"input",12),m("ngModelChange",function(e){return u(r.apellido,e)||(r.apellido=e),e}),i()(),t(28,"button",13),n(29," Registrar Usuario "),i()()()),l&2&&(o(5),c("ngIf",r.mensaje),o(),c("ngIf",r.error),o(5),d("ngModel",r.email),o(4),d("ngModel",r.password),o(4),d("ngModel",r.nombre_usuario),o(4),d("ngModel",r.nombre),o(4),d("ngModel",r.apellido))},dependencies:[E,x,L,j,U,R,W,T,A,I,N],encapsulation:2})};export{B as RegistrarUsuarioComponent};
