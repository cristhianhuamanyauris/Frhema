import{a as B}from"./chunk-MPLFMEUX.js";import{b as P,c as N,f as F,i as O,j as T,k as W,o as D}from"./chunk-SMCZ5Z56.js";import"./chunk-5T4VIS3M.js";import{$a as u,Cb as w,Db as M,Fb as I,Ga as y,Gb as R,Ia as m,Ma as e,Na as t,Qa as b,Ra as _,W as C,Wa as n,Xa as p,Ya as s,_a as c,ab as g,cb as E,fb as f,gb as S,wa as o,xa as h}from"./chunk-V3AN2ELD.js";import{h as v}from"./chunk-FK42CRUA.js";function L(d,a){if(d&1&&(e(0,"option",7),n(1),t()),d&2){let r=a.$implicit;m("ngValue",r.id_proveedor),o(),s(" ",r.nombre," ")}}function k(d,a){if(d&1&&(e(0,"tr",18)(1,"td",15),n(2),t(),e(3,"td",15),n(4),t(),e(5,"td",15),n(6),t(),e(7,"td",15),n(8),t(),e(9,"td",15),n(10),t(),e(11,"td",15),n(12),f(13,"currency"),t(),e(14,"td",19),n(15),f(16,"currency"),t()()),d&2){let r=a.$implicit,i=_();o(2),p(i.formatear(r.fecha)),o(2),p(r.proveedor),o(2),p(r.nro_documento||"\u2014"),o(2),p(r.producto),o(2),p(r.cantidad),o(2),p(S(13,7,r.costo_unitario,"PEN")),o(3),s(" ",S(16,10,r.subtotal,"PEN")," ")}}function A(d,a){d&1&&(e(0,"tr")(1,"td",20),n(2," No hay resultados "),t()())}var V=class d{constructor(a){this.reportesService=a}desde="";hasta="";proveedorSeleccionado=null;proveedores=[];resultados=[];totalComprado=0;ngOnInit(){return v(this,null,function*(){this.proveedores=yield this.reportesService.getProveedores()})}filtrar(){return v(this,null,function*(){let a=yield this.reportesService.getComprasReporte(this.desde,this.hasta,this.proveedorSeleccionado);this.resultados=a.resultados,this.totalComprado=a.total})}formatear(a){return new Date(a).toLocaleDateString("es-PE")}static \u0275fac=function(r){return new(r||d)(h(B))};static \u0275cmp=C({type:d,selectors:[["app-compras-reporte"]],standalone:!0,features:[E],decls:47,vars:11,consts:[[1,"p-4","space-y-4"],[1,"text-2xl","font-bold","text-gray-800"],[1,"bg-white","p-4","rounded-xl","shadow","border","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"text-sm","font-semibold","text-gray-700"],["type","date",1,"w-full","border","rounded","px-3","py-2",3,"ngModelChange","ngModel"],[1,"w-full","border","rounded","px-3","py-2",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"px-4","py-2","bg-blue-600","text-white","rounded-lg","hover:bg-blue-700",3,"click"],[1,"bg-white","p-4","rounded-xl","shadow","border"],[1,"text-lg","font-bold","text-gray-800","mb-3"],[1,"overflow-x-auto"],[1,"w-full","border-collapse","min-w-[700px]"],[1,"bg-gray-100","text-left","text-sm","font-semibold"],[1,"px-3","py-2"],["class","border-b",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"border-b"],[1,"px-3","py-2","font-semibold","text-blue-600"],["colspan","7",1,"text-center","text-gray-500","py-4"]],template:function(r,i){r&1&&(e(0,"div",0)(1,"h2",1),n(2,"Reporte de Compras"),t(),e(3,"div",2)(4,"div",3)(5,"div")(6,"label",4),n(7,"Desde"),t(),e(8,"input",5),g("ngModelChange",function(l){return u(i.desde,l)||(i.desde=l),l}),t()(),e(9,"div")(10,"label",4),n(11,"Hasta"),t(),e(12,"input",5),g("ngModelChange",function(l){return u(i.hasta,l)||(i.hasta=l),l}),t()(),e(13,"div")(14,"label",4),n(15,"Proveedor"),t(),e(16,"select",6),g("ngModelChange",function(l){return u(i.proveedorSeleccionado,l)||(i.proveedorSeleccionado=l),l}),e(17,"option",7),n(18,"Todos"),t(),y(19,L,2,2,"option",8),t()()(),e(20,"button",9),b("click",function(){return i.filtrar()}),n(21," Generar reporte "),t()(),e(22,"div",10)(23,"h3",11),n(24),f(25,"currency"),t(),e(26,"div",12)(27,"table",13)(28,"thead")(29,"tr",14)(30,"th",15),n(31,"Fecha"),t(),e(32,"th",15),n(33,"Proveedor"),t(),e(34,"th",15),n(35,"Documento"),t(),e(36,"th",15),n(37,"Producto"),t(),e(38,"th",15),n(39,"Cantidad"),t(),e(40,"th",15),n(41,"Costo"),t(),e(42,"th",15),n(43,"Subtotal"),t()()(),e(44,"tbody"),y(45,k,17,13,"tr",16)(46,A,3,0,"tr",17),t()()()()()),r&2&&(o(8),c("ngModel",i.desde),o(4),c("ngModel",i.hasta),o(4),c("ngModel",i.proveedorSeleccionado),o(),m("ngValue",null),o(2),m("ngForOf",i.proveedores),o(5),s(" Resultados (Total: ",S(25,8,i.totalComprado,"PEN"),") "),o(21),m("ngForOf",i.resultados),o(),m("ngIf",i.resultados.length===0))},dependencies:[R,w,M,I,D,T,W,P,O,N,F],encapsulation:2})};export{V as ComprasReporteComponent};
