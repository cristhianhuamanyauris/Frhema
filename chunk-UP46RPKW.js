import{a as V}from"./chunk-PQWWGH2I.js";import{d as k}from"./chunk-5J2A4TKV.js";import{a as M}from"./chunk-5HNPAAR5.js";import"./chunk-M2GT5SNT.js";import{Db as y,Eb as w,Ga as u,Hb as E,Ia as c,La as b,Ma as e,Na as t,Oa as l,Ra as g,W as f,Wa as n,Xa as p,Ya as v,db as S,ea as s,fa as d,wa as a,xa as h}from"./chunk-SFQMZB6G.js";import{h as x}from"./chunk-FK42CRUA.js";function _(r,o){if(r&1&&(e(0,"div",28)(1,"div",29)(2,"div",24)(3,"div",30)(4,"div",31)(5,"p",32),n(6,"Ventas Hoy"),t(),e(7,"h3",33),n(8),t()(),e(9,"div",34),s(),e(10,"svg",35),l(11,"path",36),t()()()(),d(),l(12,"div",37),t(),e(13,"div",29)(14,"div",24)(15,"div",30)(16,"div",31)(17,"p",32),n(18,"Monto Hoy"),t(),e(19,"h3",33),n(20),t()(),e(21,"div",38),s(),e(22,"svg",35),l(23,"path",39),t()()()(),d(),l(24,"div",40),t(),e(25,"div",29)(26,"div",24)(27,"div",30)(28,"div",31)(29,"p",32),n(30,"Ventas / Mes"),t(),e(31,"h3",33),n(32),t()(),e(33,"div",34),s(),e(34,"svg",35),l(35,"path",41),t()()()(),d(),l(36,"div",37),t(),e(37,"div",29)(38,"div",24)(39,"div",30)(40,"div",31)(41,"p",32),n(42,"Monto / Mes"),t(),e(43,"h3",33),n(44),t()(),e(45,"div",38),s(),e(46,"svg",35),l(47,"path",42),t()()()(),d(),l(48,"div",40),t()()),r&2){let i=g();a(8),p(i.ventasHoy),a(12),p(i.formatearMoneda(i.montoHoy)),a(12),p(i.ventasMes),a(12),p(i.formatearMoneda(i.montoMes))}}function I(r,o){r&1&&(e(0,"a",43)(1,"span",44),n(2," \u2714\uFE0F \xDAtil "),t(),e(3,"div",45),s(),e(4,"svg",35),l(5,"path",41),t()(),d(),e(6,"h3",46),n(7,"Productos"),t(),e(8,"span",47),n(9,"Inventario"),t()())}function T(r,o){r&1&&(e(0,"a",48)(1,"div",49),s(),e(2,"svg",35),l(3,"path",50),t()(),d(),e(4,"h3",46),n(5,"POS"),t(),e(6,"span",47),n(7,"Ventas"),t()())}function L(r,o){r&1&&(e(0,"a",51)(1,"div",52),s(),e(2,"svg",35),l(3,"path",53),t()(),d(),e(4,"h3",46),n(5,"Ventas"),t(),e(6,"span",47),n(7,"Historial"),t()())}function H(r,o){r&1&&(e(0,"a",54)(1,"div",45),s(),e(2,"svg",35),l(3,"path",55),t()(),d(),e(4,"h3",46),n(5,"Clientes"),t(),e(6,"span",47),n(7,"Gesti\xF3n"),t()())}function D(r,o){r&1&&(e(0,"a",56)(1,"div",57),s(),e(2,"svg",35),l(3,"path",36),t()(),d(),e(4,"h3",46),n(5,"Compras"),t(),e(6,"span",47),n(7,"Registro"),t()())}function j(r,o){if(r&1&&(e(0,"tr",66)(1,"td",67)(2,"div",68)(3,"span",69),n(4),t(),e(5,"span",70),n(6),t()()(),e(7,"td",67)(8,"div",71),s(),e(9,"svg",72),l(10,"path",73),t(),d(),e(11,"span",74),n(12),t()()(),e(13,"td",67)(14,"span",75),n(15),t()(),e(16,"td",76)(17,"div",77),s(),e(18,"svg",78),l(19,"path",79),t(),d(),e(20,"span",74),n(21),t()()(),e(22,"td",67)(23,"span",80),n(24," Emitido "),t()()()),r&2){let i=o.$implicit,m=g(2);a(4),p(i.tipo_comprobante||"NOTA DE VENTA"),a(2),p(i.nro_comprobante||"N/A"),a(6),p(m.getNombreCliente(i)),a(3),p(m.formatearMoneda(i.total||0)),a(6),p(m.formatearFecha(i.fecha))}}function P(r,o){r&1&&(e(0,"tr",81)(1,"td",82),n(2,"No hay ventas hoy"),t()())}function F(r,o){if(r&1&&(e(0,"div",58)(1,"div",9)(2,"div",10),s(),e(3,"svg",11),l(4,"path",53),t(),d(),e(5,"span"),n(6,"VENTAS RECIENTES"),t()()(),e(7,"section",22)(8,"div",23)(9,"div",59)(10,"table",60)(11,"thead")(12,"tr",61)(13,"th",62),n(14,"Comprobante"),t(),e(15,"th",62),n(16,"Cliente"),t(),e(17,"th",62),n(18,"Total"),t(),e(19,"th",62),n(20,"Fecha"),t(),e(21,"th",62),n(22,"Estado"),t()()(),e(23,"tbody",63),u(24,j,25,5,"tr",64)(25,P,3,0,"tr",65),t()()()()()()),r&2){let i=g();a(24),c("ngForOf",i.ventasRecientes),a(),c("ngIf",i.ventasRecientes.length===0)}}function G(r,o){if(r&1&&(e(0,"div",83)(1,"div",84)(2,"p",85),n(3),t(),e(4,"p",86),n(5),t()(),e(6,"span",87),n(7),t()()),r&2){let i=o.$implicit;a(3),v(" ",i.nombre," "),a(2),p(i.codigo),a(2),v(" Stock: ",i.stock_actual," ")}}function O(r,o){r&1&&(e(0,"div",88),n(1," No hay productos con stock cr\xEDtico "),t())}var C=class r{constructor(o,i){this.ventasService=o;this.productosService=i}rol=Number(localStorage.getItem("rol"))||0;ventasHoy=0;montoHoy=0;ventasMes=0;montoMes=0;ventasRecientes=[];productosStockCritico=[];loading=!0;ngOnInit(){return x(this,null,function*(){yield this.cargarDatos()})}cargarDatos(){return x(this,null,function*(){try{this.loading=!0,(this.rol===1||this.rol===2||this.rol===5)&&(this.ventasHoy=yield this.ventasService.getVentasHoyCount(),this.montoHoy=yield this.ventasService.getMontoHoy(),this.ventasMes=yield this.ventasService.getVentasMesCount(),this.montoMes=yield this.ventasService.getMontoMes(),this.ventasRecientes=yield this.ventasService.getVentasRecientes()),this.productosStockCritico=yield this.productosService.getProductosStockCritico(3)}catch(o){console.error("Error al cargar datos del dashboard:",o)}finally{this.loading=!1}})}puedeVerVentas(){return this.rol===1||this.rol===2||this.rol===5}puedeVerProductos(){return this.rol===1||this.rol===3}puedeVerPOS(){return this.rol===1||this.rol===2}puedeVerClientes(){return this.rol===1||this.rol===2||this.rol===5}puedeVerCompras(){return this.rol===1||this.rol===4}formatearFecha(o){return o?new Date(o).toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"}):""}formatearMoneda(o){return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:2}).format(o)}getNombreCliente(o){return o.clientes?.nombre||"Cliente General"}static \u0275fac=function(i){return new(i||r)(h(V),h(M))};static \u0275cmp=f({type:r,selectors:[["app-dashboard"]],standalone:!0,features:[S],decls:39,vars:11,consts:[[1,"w-full","max-w-[1200px]","mx-auto","flex","flex-col","px-2","md:px-3","pb-2"],[1,"flex","items-start","justify-between","gap-4","px-0","py-3","pb-2","bg-transparent","border-none","shadow-none"],[1,"flex-1"],[1,"flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"m-0","text-2xl","font-semibold","text-gray-900","tracking-wide"],[1,"mt-1","mb-0","text-sm","text-gray-600"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-3",4,"ngIf"],[1,"flex","items-center","justify-between","px-0","py-1.5","mb-1.5","border-b","border-gray-200"],[1,"flex","items-center","text-gray-900","text-xs","font-semibold","uppercase","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","mb-3"],["routerLink","/dashboard/productos","class","group relative bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all p-4 flex flex-col items-center text-center focus:outline-none focus:ring-2 focus:ring-blue-400",4,"ngIf"],["routerLink","/dashboard/pos","class","group bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all p-4 flex flex-col items-center text-center focus:outline-none focus:ring-2 focus:ring-blue-400",4,"ngIf"],["routerLink","/dashboard/ventas","class","group bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all p-4 flex flex-col items-center text-center focus:outline-none focus:ring-2 focus:ring-blue-400",4,"ngIf"],["routerLink","/dashboard/clientes","class","group bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all p-4 flex flex-col items-center text-center focus:outline-none focus:ring-2 focus:ring-blue-400",4,"ngIf"],["routerLink","/dashboard/compras","class","group bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-all p-4 flex flex-col items-center text-center focus:outline-none focus:ring-2 focus:ring-blue-400",4,"ngIf"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-3","mb-3"],["class","lg:col-span-8",4,"ngIf"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"rounded-none","border-none","bg-transparent","overflow-auto","shadow-none","px-0","pb-2"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"p-4"],[1,"space-y-3","max-h-[50vh]","overflow-y-auto"],["class","flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100",4,"ngFor","ngForOf"],["class","text-gray-500 text-sm text-center py-4",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-3","mb-3"],[1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-shadow","overflow-hidden"],[1,"flex","justify-between","items-start","gap-3"],[1,"min-w-0"],[1,"text-gray-500","text-xs","font-medium"],[1,"text-xl","font-bold","text-gray-900","mt-1"],[1,"shrink-0","p-2.5","rounded-lg","bg-blue-50","text-blue-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"h-16","w-full","bg-gradient-to-r","from-blue-50","to-blue-100","group-hover:from-blue-100","group-hover:to-blue-200","transition-colors"],[1,"shrink-0","p-2.5","rounded-lg","bg-orange-50","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"h-16","w-full","bg-gradient-to-r","from-orange-50","to-orange-100","group-hover:from-orange-100","group-hover:to-orange-200","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],["routerLink","/dashboard/productos",1,"group","relative","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"absolute","top-2","right-2","bg-blue-50","text-blue-700","text-[10px]","font-semibold","px-2","py-0.5","rounded-full"],[1,"p-2.5","rounded-lg","bg-blue-50","text-blue-600","mb-2","group-hover:scale-[1.03]","transition-transform"],[1,"font-semibold","text-gray-900","text-sm","leading-tight"],[1,"text-xs","text-gray-500","mt-1"],["routerLink","/dashboard/pos",1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"p-2.5","rounded-lg","bg-green-50","text-green-600","mb-2","group-hover:scale-[1.03]","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],["routerLink","/dashboard/ventas",1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"p-2.5","rounded-lg","bg-orange-50","text-orange-600","mb-2","group-hover:scale-[1.03]","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],["routerLink","/dashboard/clientes",1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],["routerLink","/dashboard/compras",1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"p-2.5","rounded-lg","bg-purple-50","text-purple-600","mb-2","group-hover:scale-[1.03]","transition-transform"],[1,"lg:col-span-8"],[1,"overflow-x-auto"],[1,"w-full","border-collapse","min-w-[720px]"],[1,"text-xs","font-semibold","text-left","text-gray-500","uppercase","bg-gray-50","border-b","border-gray-200"],[1,"px-4","py-3"],[1,"divide-y","divide-gray-100"],["class","text-gray-700 hover:bg-blue-50 transition-colors",4,"ngFor","ngForOf"],["class","text-gray-500 text-center",4,"ngIf"],[1,"text-gray-700","hover:bg-blue-50","transition-colors"],[1,"px-4","py-3","text-sm"],[1,"flex","flex-col"],[1,"text-gray-900","font-semibold"],[1,"text-gray-500","text-xs"],[1,"flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"whitespace-nowrap"],[1,"text-blue-600","font-semibold","whitespace-nowrap"],[1,"px-4","py-3","text-xs"],[1,"flex","items-center","gap-2","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2.5","py-1","text-xs","rounded-full","bg-green-50","text-green-700"],[1,"text-gray-500","text-center"],["colspan","5",1,"px-4","py-4","text-sm"],[1,"flex","items-center","justify-between","p-3","bg-red-50","rounded-lg","border","border-red-100"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-xs","text-gray-500","truncate"],[1,"ml-4","flex-shrink-0","px-3","py-1","text-xs","font-bold","rounded-full","bg-red-100","text-red-800","whitespace-nowrap"],[1,"text-gray-500","text-sm","text-center","py-4"]],template:function(i,m){i&1&&(e(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),s(),e(4,"svg",4),l(5,"path",5),t(),d(),e(6,"div")(7,"h1",6),n(8,"Dashboard"),t(),e(9,"p",7),n(10,"Resumen general de ventas, estad\xEDsticas y accesos r\xE1pidos."),t()()()()(),u(11,_,49,4,"div",8),e(12,"div",9)(13,"div",10),s(),e(14,"svg",11),l(15,"path",12),t(),d(),e(16,"span"),n(17,"ACCESOS R\xC1PIDOS"),t()()(),e(18,"div",13),u(19,I,10,0,"a",14)(20,T,8,0,"a",15)(21,L,8,0,"a",16)(22,H,8,0,"a",17)(23,D,8,0,"a",18),t(),e(24,"div",19),u(25,F,26,2,"div",20),e(26,"div")(27,"div",9)(28,"div",10),s(),e(29,"svg",11),l(30,"path",21),t(),d(),e(31,"span"),n(32,"STOCK CR\xCDTICO"),t()()(),e(33,"section",22)(34,"div",23)(35,"div",24)(36,"div",25),u(37,G,8,3,"div",26)(38,O,2,0,"div",27),t()()()()()()()),i&2&&(a(11),c("ngIf",m.puedeVerVentas()),a(8),c("ngIf",m.puedeVerProductos()),a(),c("ngIf",m.puedeVerPOS()),a(),c("ngIf",m.puedeVerPOS()),a(),c("ngIf",m.puedeVerClientes()),a(),c("ngIf",m.puedeVerCompras()),a(2),c("ngIf",m.puedeVerVentas()),a(),b(m.puedeVerVentas()?"lg:col-span-4":"lg:col-span-12"),a(11),c("ngForOf",m.productosStockCritico),a(),c("ngIf",m.productosStockCritico.length===0))},dependencies:[E,y,w,k]})};export{C as DashboardComponent};
