import{a as R}from"./chunk-ICTQ4SKP.js";import{b as F,c as N,d as G,e as A,f as B,g as z,m as O,o as W}from"./chunk-SMCZ5Z56.js";import"./chunk-5T4VIS3M.js";import{$a as S,Cb as j,Db as I,Ga as v,Gb as L,Ia as _,Ma as e,Na as t,Oa as s,Pa as h,Qa as b,Ra as u,Va as T,W as M,Wa as n,Xa as C,Ya as y,_a as w,ab as E,ca as d,cb as D,da as m,ea as g,fa as p,ib as H,wa as x,xa as V}from"./chunk-V3AN2ELD.js";import{a as k,h as f}from"./chunk-FK42CRUA.js";function q(l,a){if(l&1){let r=h();e(0,"tr",26)(1,"td",27),n(2),t(),e(3,"td",28)(4,"div",29),n(5),t()(),e(6,"td",27),n(7),t(),e(8,"td",30)(9,"div",31)(10,"button",32),b("click",function(){let i=d(r).$implicit,c=u(2);return m(c.editarCategoria(i))}),g(),e(11,"svg",33),s(12,"path",34),t(),p(),e(13,"span"),n(14,"Editar"),t()(),e(15,"button",35),b("click",function(){let i=d(r).$implicit,c=u(2);return m(c.eliminarCategoria(i.id_categoria))}),g(),e(16,"svg",33),s(17,"path",36),t(),p(),e(18,"span"),n(19,"Eliminar"),t()()()()()}if(l&2){let r=a.$implicit;x(2),y(" ",r.id_categoria," "),x(3),C(r.nombre),x(2),y(" ",r.descripcion||"-"," ")}}function U(l,a){if(l&1&&(e(0,"table",23)(1,"thead")(2,"tr")(3,"th",24),n(4," ID "),t(),e(5,"th",24),n(6," Nombre "),t(),e(7,"th",24),n(8," Descripci\xF3n "),t(),e(9,"th",24),n(10," Acciones "),t()()(),e(11,"tbody"),v(12,q,20,3,"tr",25),t()()),l&2){let r=u();x(12),_("ngForOf",r.categorias)}}function J(l,a){if(l&1){let r=h();e(0,"div",37),g(),e(1,"svg",38),s(2,"path",39),t(),p(),e(3,"h3",40),n(4,"No hay categor\xEDas registradas"),t(),e(5,"p",41),n(6,"Crea una con el bot\xF3n "),e(7,"b"),n(8,"Nueva Categor\xEDa"),t(),n(9,"."),t(),e(10,"button",42),b("click",function(){d(r);let i=u();return m(i.nuevaCategoria())}),g(),e(11,"svg",15),s(12,"path",16),t(),p(),e(13,"span"),n(14,"Nueva Categor\xEDa"),t()()()}}function K(l,a){if(l&1){let r=h();e(0,"div",43),b("click",function(i){d(r);let c=u();return m(c.cerrarModal(i))}),e(1,"div",44),b("click",function(i){return d(r),m(i.stopPropagation())}),e(2,"div",45)(3,"div",4),g(),e(4,"svg",5),s(5,"path",16),t(),p(),e(6,"h3",46),n(7),t()(),e(8,"button",47),b("click",function(){d(r);let i=u();return m(i.cerrarModalDirecto())}),g(),e(9,"svg",48),s(10,"path",49),t()()(),p(),e(11,"form",50),b("ngSubmit",function(){d(r);let i=u();return m(i.guardarCategoria())}),e(12,"div",51)(13,"div",52)(14,"label",53),n(15," Nombre "),e(16,"span",54),n(17,"*"),t()(),e(18,"input",55),E("ngModelChange",function(i){d(r);let c=u();return S(c.categoria.nombre,i)||(c.categoria.nombre=i),m(i)}),t()(),e(19,"div",52)(20,"label",53),n(21,"Descripci\xF3n"),t(),e(22,"input",56),E("ngModelChange",function(i){d(r);let c=u();return S(c.categoria.descripcion,i)||(c.categoria.descripcion=i),m(i)}),t()()(),e(23,"div",57)(24,"button",58),b("click",function(){d(r);let i=u();return m(i.cerrarModalDirecto())}),g(),e(25,"svg",15),s(26,"path",49),t(),p(),e(27,"span"),n(28,"Cancelar"),t()(),e(29,"button",59),g(),e(30,"svg",15),s(31,"path",60),t(),p(),e(32,"span"),n(33),t()()()()()()}if(l&2){let r=u();x(7),y(" ",r.modoEdicion?"Editar Categor\xEDa":"Nueva Categor\xEDa"," "),x(11),w("ngModel",r.categoria.nombre),x(4),w("ngModel",r.categoria.descripcion),x(11),C(r.modoEdicion?"Actualizar":"Crear")}}var P=class l{constructor(a){this.categoriasService=a}categorias=[];loading=!0;modoEdicion=!1;mostrarFormulario=!1;categoria=this.getEmptyCategoria();ngOnInit(){this.cargarCategorias()}getEmptyCategoria(){return{nombre:"",descripcion:""}}cargarCategorias(){return f(this,null,function*(){this.loading=!0,this.categorias=yield this.categoriasService.getCategorias(),this.loading=!1})}nuevaCategoria(){this.modoEdicion=!1,this.mostrarFormulario=!0,this.categoria=this.getEmptyCategoria()}editarCategoria(a){this.modoEdicion=!0,this.mostrarFormulario=!0,this.categoria=k({},a)}cerrarModalDirecto(){this.mostrarFormulario=!1,this.modoEdicion=!1,this.categoria=this.getEmptyCategoria()}cerrarModal(a){a.target?.classList?.contains("fixed")&&this.cerrarModalDirecto()}guardarCategoria(){return f(this,null,function*(){try{this.modoEdicion&&this.categoria.id_categoria?(yield this.categoriasService.updateCategoria(this.categoria.id_categoria,this.categoria),alert("Categor\xEDa actualizada")):(yield this.categoriasService.addCategoria(this.categoria),alert("Categor\xEDa creada")),this.cerrarModalDirecto(),this.cargarCategorias()}catch(a){alert("Error al guardar categor\xEDa"),console.error(a)}})}eliminarCategoria(a){return f(this,null,function*(){if(confirm("\xBFEliminar categor\xEDa?"))try{yield this.categoriasService.deleteCategoria(a),this.cargarCategorias()}catch{alert("Error al eliminar")}})}static \u0275fac=function(r){return new(r||l)(V(R))};static \u0275cmp=M({type:l,selectors:[["app-categorias"]],standalone:!0,features:[D],decls:32,vars:3,consts:[["sinDatos",""],[1,"w-full","max-w-[1200px]","mx-auto","flex","flex-col","px-2","md:px-3","pb-2"],[1,"flex","items-start","justify-between","gap-4","px-0","pt-0","pb-2","bg-transparent","border-none","shadow-none"],[1,"flex-1"],[1,"flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 7h10M7 12h10M7 17h10M5 5h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2z"],[1,"m-0","text-2xl","font-semibold","text-gray-900","tracking-wide"],[1,"mt-1","mb-0","text-sm","text-gray-600"],[1,"flex","items-center","justify-between","px-0","py-1.5","mb-1.5","border-b","border-gray-200"],[1,"flex","items-center","text-gray-900","text-xs","font-semibold","uppercase","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"],[1,"flex","items-center","gap-2"],["type","button",1,"flex","items-center","justify-center","gap-2","px-3","py-2","text-xs","font-semibold","bg-blue-600","text-white","border","border-blue-600","rounded-lg","shadow-md","hover:bg-blue-700","hover:border-blue-700","hover:shadow-lg","transition-all","uppercase",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],[1,"px-0","pb-2"],[1,"flex","items-center","gap-2","text-sm","text-gray-900","font-medium"],["type","search","placeholder","Buscar categor\xEDa...",1,"px-3","py-1.5","border","border-gray-300","rounded","text-sm","text-gray-900","bg-white","outline-none","transition-all","focus:border-blue-600","focus:ring-1","focus:ring-blue-600"],[1,"rounded-none","border-none","bg-transparent","overflow-auto","shadow-none","px-0","pb-2"],["class","w-full border-collapse min-w-[860px]",4,"ngIf","ngIfElse"],["class","fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-[2000]",3,"click",4,"ngIf"],[1,"w-full","border-collapse","min-w-[860px]"],[1,"text-left","text-xs","tracking-wider","uppercase","text-gray-600","py-3.5","px-4","bg-transparent","sticky","top-0","border-b","border-gray-200","font-semibold"],["class","hover:bg-blue-50 transition-colors",4,"ngFor","ngForOf"],[1,"hover:bg-blue-50","transition-colors"],[1,"py-4","px-4","border-b","border-gray-100","align-middle","text-gray-600","text-sm"],[1,"py-4","px-4","border-b","border-gray-100","align-middle","text-gray-900","text-sm"],[1,"font-semibold","text-gray-900","tracking-wide","leading-snug"],[1,"py-4","px-4","border-b","border-gray-100","align-middle"],[1,"flex","gap-2.5","justify-end"],["type","button","title","Editar",1,"border","border-gray-300","bg-white","text-gray-900","rounded-lg","px-3.5","py-2","cursor-pointer","inline-flex","items-center","gap-2","transition-all","hover:-translate-y-0.5","hover:bg-gray-50","hover:border-gray-400","hover:shadow","text-xs","font-medium","whitespace-nowrap",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3.5","h-3.5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],["type","button","title","Eliminar",1,"border","border-red-300","bg-red-50","text-red-700","rounded-lg","px-3.5","py-2","cursor-pointer","inline-flex","items-center","gap-2","transition-all","hover:-translate-y-0.5","hover:bg-red-100","hover:border-red-400","hover:shadow","text-xs","font-medium","whitespace-nowrap",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],[1,"py-12","px-6","text-center","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-12","h-12","mx-auto","mb-4","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"m-0","mb-2","text-gray-900","font-semibold"],[1,"m-0","mb-6","text-gray-600"],["type","button",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-blue-600","text-white","border","border-blue-600","rounded-lg","cursor-pointer","font-medium","text-sm","transition-all","hover:-translate-y-0.5","hover:bg-blue-700","hover:border-blue-700","hover:shadow-md",3,"click"],[1,"fixed","inset-0","bg-black","bg-opacity-50","backdrop-blur-sm","flex","items-center","justify-center","p-4","z-[2000]",3,"click"],[1,"w-full","max-w-[640px]","rounded-xl","overflow-hidden","border","border-gray-200","bg-white","shadow-lg","max-h-[85vh]","flex","flex-col",3,"click"],[1,"flex","items-center","justify-between","px-5","py-4","border-b","border-gray-200","bg-white","flex-shrink-0"],[1,"m-0","text-lg","font-semibold","text-gray-900"],["type","button","title","Cerrar",1,"border-none","bg-transparent","text-gray-600","text-xl","cursor-pointer","p-2","rounded-md","flex","items-center","justify-center","transition-all","hover:bg-gray-100","hover:text-gray-900",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"px-5","py-4","bg-white","overflow-y-auto","flex-1",3,"ngSubmit"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,"mb-0","md:col-span-2"],[1,"block","mb-2","text-gray-900","text-sm","font-medium","leading-6"],[1,"text-red-500"],["type","text","name","nombre","required","","placeholder","Ej: Herramientas",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","outline-none","text-sm","transition-all","box-border","focus:border-blue-600","focus:bg-white","focus:ring-1","focus:ring-blue-200","hover:border-gray-400",3,"ngModelChange","ngModel"],["type","text","name","descripcion","placeholder","Ej: Categor\xEDa para...",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-gray-50","text-gray-900","outline-none","text-sm","transition-all","box-border","focus:border-blue-600","focus:bg-white","focus:ring-1","focus:ring-blue-200","hover:border-gray-400",3,"ngModelChange","ngModel"],[1,"flex","justify-center","gap-2.5","mt-4","pt-4","border-t","border-gray-200","bg-white","flex-shrink-0"],["type","button",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-white","border","border-gray-300","text-gray-900","rounded-lg","cursor-pointer","font-medium","text-sm","transition-all","hover:-translate-y-0.5","hover:bg-gray-50","hover:border-gray-400","hover:shadow-md",3,"click"],["type","submit",1,"inline-flex","items-center","gap-2","px-4","py-2","bg-blue-600","text-white","border","border-blue-600","rounded-lg","cursor-pointer","font-medium","text-sm","transition-all","hover:-translate-y-0.5","hover:bg-blue-700","hover:border-blue-700","hover:shadow-md"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"]],template:function(r,o){if(r&1){let i=h();e(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4),g(),e(4,"svg",5),s(5,"path",6),t(),p(),e(6,"div")(7,"h1",7),n(8,"Gesti\xF3n de Categor\xEDas"),t(),e(9,"p",8),n(10,"Administra y organiza tus categor\xEDas del inventario."),t()()()()(),e(11,"div",9)(12,"div",10),g(),e(13,"svg",11),s(14,"path",12),t(),p(),e(15,"span"),n(16,"REGISTROS"),t()(),e(17,"div",13)(18,"button",14),b("click",function(){return d(i),m(o.nuevaCategoria())}),g(),e(19,"svg",15),s(20,"path",16),t(),p(),e(21,"span"),n(22,"NUEVA CATEGOR\xCDA"),t()()()(),e(23,"div",17)(24,"label",18),n(25," Search: "),s(26,"input",19),t()(),e(27,"section",20),v(28,U,13,1,"table",21)(29,J,15,0,"ng-template",null,0,H),t(),v(31,K,34,4,"div",22),t()}if(r&2){let i=T(30);x(28),_("ngIf",o.categorias==null?null:o.categorias.length)("ngIfElse",i),x(3),_("ngIf",o.mostrarFormulario)}},dependencies:[L,j,I,W,z,F,N,G,O,B,A],encapsulation:2})};export{P as CategoriasComponent};
