import{a as k}from"./chunk-H6WS2JFF.js";import{d as E}from"./chunk-5J2A4TKV.js";import{a as M}from"./chunk-BFJLTYAI.js";import"./chunk-O5HRWX2F.js";import{Db as S,Eb as y,Ga as v,Hb as w,Ia as p,Ma as e,Na as t,Oa as i,Ra as f,W as h,Wa as n,Xa as c,Ya as x,db as b,ea as l,fa as s,wa as o,xa as g}from"./chunk-SFQMZB6G.js";import{h as u}from"./chunk-FK42CRUA.js";function V(m,r){if(m&1&&(e(0,"tr",58)(1,"td",59)(2,"div",60)(3,"span",61),n(4),t(),e(5,"span",62),n(6),t()()(),e(7,"td",59)(8,"div",63),l(),e(9,"svg",64),i(10,"path",65),t(),s(),e(11,"span",66),n(12),t()()(),e(13,"td",59)(14,"span",67),n(15),t()(),e(16,"td",68)(17,"div",69),l(),e(18,"svg",70),i(19,"path",71),t(),s(),e(20,"span",66),n(21),t()()(),e(22,"td",59)(23,"span",72),n(24," Emitido "),t()()()),m&2){let a=r.$implicit,d=f();o(4),c(a.tipo_comprobante||"NOTA DE VENTA"),o(2),c(a.nro_comprobante||"N/A"),o(6),c(d.getNombreCliente(a)),o(3),c(d.formatearMoneda(a.total||0)),o(6),c(d.formatearFecha(a.fecha))}}function H(m,r){m&1&&(e(0,"tr",73)(1,"td",74),n(2,"No hay ventas hoy"),t()())}function I(m,r){if(m&1&&(e(0,"div",75)(1,"div",76)(2,"p",77),n(3),t(),e(4,"p",78),n(5),t()(),e(6,"span",79),n(7),t()()),m&2){let a=r.$implicit;o(3),x(" ",a.nombre," "),o(2),c(a.codigo),o(2),x(" Stock: ",a.stock_actual," ")}}function L(m,r){m&1&&(e(0,"div",80),n(1," No hay productos con stock cr\xEDtico "),t())}var C=class m{constructor(r,a){this.ventasService=r;this.productosService=a}ventasHoy=0;montoHoy=0;ventasMes=0;montoMes=0;ventasRecientes=[];productosStockCritico=[];loading=!0;ngOnInit(){return u(this,null,function*(){yield this.cargarDatos()})}cargarDatos(){return u(this,null,function*(){try{this.loading=!0,this.ventasHoy=yield this.ventasService.getVentasHoyCount(),this.montoHoy=yield this.ventasService.getMontoHoy(),this.ventasMes=yield this.ventasService.getVentasMesCount(),this.montoMes=yield this.ventasService.getMontoMes(),this.ventasRecientes=yield this.ventasService.getVentasRecientes(),this.productosStockCritico=yield this.productosService.getProductosStockCritico(3)}catch(r){console.error("Error al cargar datos del dashboard:",r)}finally{this.loading=!1}})}formatearFecha(r){return r?new Date(r).toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"}):""}formatearMoneda(r){return new Intl.NumberFormat("es-PE",{style:"currency",currency:"PEN",minimumFractionDigits:2}).format(r)}getNombreCliente(r){return r.clientes?.nombre||"Cliente General"}static \u0275fac=function(a){return new(a||m)(g(k),g(M))};static \u0275cmp=h({type:m,selectors:[["app-dashboard"]],standalone:!0,features:[b],decls:141,vars:8,consts:[[1,"w-full","max-w-[1200px]","mx-auto","flex","flex-col","px-2","md:px-3","pb-2"],[1,"flex","items-start","justify-between","gap-4","px-0","py-3","pb-2","bg-transparent","border-none","shadow-none"],[1,"flex-1"],[1,"flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"],[1,"m-0","text-2xl","font-semibold","text-gray-900","tracking-wide"],[1,"mt-1","mb-0","text-sm","text-gray-600"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-3","mb-3"],[1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-shadow","overflow-hidden"],[1,"p-4"],[1,"flex","justify-between","items-start","gap-3"],[1,"min-w-0"],[1,"text-gray-500","text-xs","font-medium"],[1,"text-xl","font-bold","text-gray-900","mt-1"],[1,"shrink-0","p-2.5","rounded-lg","bg-blue-50","text-blue-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"],[1,"h-16","w-full","bg-gradient-to-r","from-blue-50","to-blue-100","group-hover:from-blue-100","group-hover:to-blue-200","transition-colors"],[1,"shrink-0","p-2.5","rounded-lg","bg-orange-50","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"h-16","w-full","bg-gradient-to-r","from-orange-50","to-orange-100","group-hover:from-orange-100","group-hover:to-orange-200","transition-colors"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"flex","items-center","justify-between","px-0","py-1.5","mb-1.5","border-b","border-gray-200"],[1,"flex","items-center","text-gray-900","text-xs","font-semibold","uppercase","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 10V3L4 14h7v7l9-11h-7z"],[1,"grid","grid-cols-2","sm:grid-cols-4","gap-3","mb-3"],["routerLink","/dashboard/productos",1,"group","relative","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"absolute","top-2","right-2","bg-blue-50","text-blue-700","text-[10px]","font-semibold","px-2","py-0.5","rounded-full"],[1,"p-2.5","rounded-lg","bg-blue-50","text-blue-600","mb-2","group-hover:scale-[1.03]","transition-transform"],[1,"font-semibold","text-gray-900","text-sm","leading-tight"],[1,"text-xs","text-gray-500","mt-1"],["routerLink","/dashboard/pos",1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"p-2.5","rounded-lg","bg-green-50","text-green-600","mb-2","group-hover:scale-[1.03]","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"],["routerLink","/dashboard/ventas",1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"p-2.5","rounded-lg","bg-orange-50","text-orange-600","mb-2","group-hover:scale-[1.03]","transition-transform"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],["routerLink","/dashboard/clientes",1,"group","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-all","p-4","flex","flex-col","items-center","text-center","focus:outline-none","focus:ring-2","focus:ring-blue-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"],[1,"grid","grid-cols-1","lg:grid-cols-12","gap-3","mb-3"],[1,"lg:col-span-8"],[1,"rounded-none","border-none","bg-transparent","overflow-auto","shadow-none","px-0","pb-2"],[1,"bg-white","rounded-xl","border","border-gray-200","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full","border-collapse","min-w-[720px]"],[1,"text-xs","font-semibold","text-left","text-gray-500","uppercase","bg-gray-50","border-b","border-gray-200"],[1,"px-4","py-3"],[1,"divide-y","divide-gray-100"],["class","text-gray-700 hover:bg-blue-50 transition-colors",4,"ngFor","ngForOf"],["class","text-gray-500 text-center",4,"ngIf"],[1,"lg:col-span-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"space-y-3","max-h-[50vh]","overflow-y-auto"],["class","flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-100",4,"ngFor","ngForOf"],["class","text-gray-500 text-sm text-center py-4",4,"ngIf"],[1,"text-gray-700","hover:bg-blue-50","transition-colors"],[1,"px-4","py-3","text-sm"],[1,"flex","flex-col"],[1,"text-gray-900","font-semibold"],[1,"text-gray-500","text-xs"],[1,"flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"whitespace-nowrap"],[1,"text-blue-600","font-semibold","whitespace-nowrap"],[1,"px-4","py-3","text-xs"],[1,"flex","items-center","gap-2","text-gray-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"inline-flex","items-center","px-2.5","py-1","text-xs","rounded-full","bg-green-50","text-green-700"],[1,"text-gray-500","text-center"],["colspan","5",1,"px-4","py-4","text-sm"],[1,"flex","items-center","justify-between","p-3","bg-red-50","rounded-lg","border","border-red-100"],[1,"flex-1","min-w-0"],[1,"text-sm","font-medium","text-gray-900","truncate"],[1,"text-xs","text-gray-500","truncate"],[1,"ml-4","flex-shrink-0","px-3","py-1","text-xs","font-bold","rounded-full","bg-red-100","text-red-800","whitespace-nowrap"],[1,"text-gray-500","text-sm","text-center","py-4"]],template:function(a,d){a&1&&(e(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),l(),e(4,"svg",4),i(5,"path",5),t(),s(),e(6,"div")(7,"h1",6),n(8,"Dashboard"),t(),e(9,"p",7),n(10,"Resumen general de ventas, estad\xEDsticas y accesos r\xE1pidos."),t()()()()(),e(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"p",13),n(17,"Ventas Hoy"),t(),e(18,"h3",14),n(19),t()(),e(20,"div",15),l(),e(21,"svg",16),i(22,"path",17),t()()()(),s(),i(23,"div",18),t(),e(24,"div",9)(25,"div",10)(26,"div",11)(27,"div",12)(28,"p",13),n(29,"Monto Hoy"),t(),e(30,"h3",14),n(31),t()(),e(32,"div",19),l(),e(33,"svg",16),i(34,"path",20),t()()()(),s(),i(35,"div",21),t(),e(36,"div",9)(37,"div",10)(38,"div",11)(39,"div",12)(40,"p",13),n(41,"Ventas / Mes"),t(),e(42,"h3",14),n(43),t()(),e(44,"div",15),l(),e(45,"svg",16),i(46,"path",22),t()()()(),s(),i(47,"div",18),t(),e(48,"div",9)(49,"div",10)(50,"div",11)(51,"div",12)(52,"p",13),n(53,"Monto / Mes"),t(),e(54,"h3",14),n(55),t()(),e(56,"div",19),l(),e(57,"svg",16),i(58,"path",23),t()()()(),s(),i(59,"div",21),t()(),e(60,"div",24)(61,"div",25),l(),e(62,"svg",26),i(63,"path",27),t(),s(),e(64,"span"),n(65,"ACCESOS R\xC1PIDOS"),t()()(),e(66,"div",28)(67,"a",29)(68,"span",30),n(69," \u2714\uFE0F \xDAtil "),t(),e(70,"div",31),l(),e(71,"svg",16),i(72,"path",22),t()(),s(),e(73,"h3",32),n(74,"Productos"),t(),e(75,"span",33),n(76,"Inventario"),t()(),e(77,"a",34)(78,"div",35),l(),e(79,"svg",16),i(80,"path",36),t()(),s(),e(81,"h3",32),n(82,"POS"),t(),e(83,"span",33),n(84,"Ventas"),t()(),e(85,"a",37)(86,"div",38),l(),e(87,"svg",16),i(88,"path",39),t()(),s(),e(89,"h3",32),n(90,"Ventas"),t(),e(91,"span",33),n(92,"Historial"),t()(),e(93,"a",40)(94,"div",31),l(),e(95,"svg",16),i(96,"path",41),t()(),s(),e(97,"h3",32),n(98,"Clientes"),t(),e(99,"span",33),n(100,"Gesti\xF3n"),t()()(),e(101,"div",24)(102,"div",25),l(),e(103,"svg",26),i(104,"path",39),t(),s(),e(105,"span"),n(106,"VENTAS RECIENTES"),t()()(),e(107,"div",42)(108,"div",43)(109,"section",44)(110,"div",45)(111,"div",46)(112,"table",47)(113,"thead")(114,"tr",48)(115,"th",49),n(116,"Comprobante"),t(),e(117,"th",49),n(118,"Cliente"),t(),e(119,"th",49),n(120,"Total"),t(),e(121,"th",49),n(122,"Fecha"),t(),e(123,"th",49),n(124,"Estado"),t()()(),e(125,"tbody",50),v(126,V,25,5,"tr",51)(127,H,3,0,"tr",52),t()()()()()(),e(128,"div",53)(129,"div",24)(130,"div",25),l(),e(131,"svg",26),i(132,"path",54),t(),s(),e(133,"span"),n(134,"STOCK CR\xCDTICO"),t()()(),e(135,"section",44)(136,"div",45)(137,"div",10)(138,"div",55),v(139,I,8,3,"div",56)(140,L,2,0,"div",57),t()()()()()()()),a&2&&(o(19),c(d.ventasHoy),o(12),c(d.formatearMoneda(d.montoHoy)),o(12),c(d.ventasMes),o(12),c(d.formatearMoneda(d.montoMes)),o(71),p("ngForOf",d.ventasRecientes),o(),p("ngIf",d.ventasRecientes.length===0),o(12),p("ngForOf",d.productosStockCritico),o(),p("ngIf",d.productosStockCritico.length===0))},dependencies:[w,S,y,E]})};export{C as DashboardComponent};
