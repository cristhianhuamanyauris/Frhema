import{a as te}from"./chunk-S4FFWAGN.js";import{a as ee}from"./chunk-XGQFSMYF.js";import{a as Z}from"./chunk-BFJLTYAI.js";import{a as $}from"./chunk-ROPGUAXS.js";import{b as O,c as G,d as H,e as A,f as q,g as R,h as U,i as z,j as J,k as Y,l as K,m as Q,p as X}from"./chunk-BIJEMQVT.js";import"./chunk-O5HRWX2F.js";import{$a as g,Db as I,Eb as F,Fb as B,Ga as w,Hb as j,Ia as y,Ma as e,Na as t,Oa as b,Pa as E,Qa as f,Ra as u,Va as k,W as V,Wa as i,Xa as C,Ya as S,_a as L,ab as _,bb as v,ca as s,da as c,db as T,ea as x,fa as h,gb as W,hb as N,jb as D,wa as d,xa as P}from"./chunk-SFQMZB6G.js";import{h as M}from"./chunk-FK42CRUA.js";function re(m,l){if(m&1&&(e(0,"option",65),i(1),t()),m&2){let r=l.$implicit;y("value",r.id_proveedor),d(),S(" ",r.nombre," ")}}function ie(m,l){if(m&1&&(e(0,"option",65),i(1),t()),m&2){let r=l.$implicit;y("value",r.id_producto),d(),L(" ",r.nombre," - ",r.unidad_medida," (Stock: ",r.stock_actual||0,") ")}}function ne(m,l){if(m&1){let r=E();e(0,"tr",66)(1,"td",67),i(2),t(),e(3,"td",68),i(4),t(),e(5,"td",69),i(6),t(),e(7,"td",70),i(8),t(),e(9,"td",71),i(10),t(),e(11,"td",48)(12,"button",72),f("click",function(){let o=s(r).index,a=u();return c(a.eliminarDetalle(o))}),x(),e(13,"svg",23),b(14,"path",73),t()()()()}if(m&2){let r=l.$implicit,n=l.index,o=u();d(2),C(n+1),d(2),C(o.getNombreProducto(r.id_producto)),d(2),C(r.cantidad),d(2),S("S/ ",(r.costo_unitario||0).toFixed(2),""),d(2),S("S/ ",(r.subtotal||0).toFixed(2),"")}}function ae(m,l){m&1&&(e(0,"tr")(1,"td",74),i(2," No hay productos agregados "),t()())}function le(m,l){if(m&1&&(e(0,"option",90),i(1),t()),m&2){let r=l.$implicit;y("ngValue",r.id_categoria),d(),S(" ",r.nombre," ")}}function de(m,l){if(m&1&&(e(0,"option",65),i(1),t()),m&2){let r=l.$implicit;y("value",r),d(),S(" ",r," ")}}function se(m,l){if(m&1){let r=E();e(0,"div",75),f("click",function(){s(r);let o=u();return c(o.cerrarModalNuevoProducto())}),e(1,"div",76),f("click",function(o){return s(r),c(o.stopPropagation())}),e(2,"div",77)(3,"div",78)(4,"h3",79),x(),e(5,"svg",80),b(6,"path",24),t(),i(7," Crear Nuevo Producto "),t(),h(),e(8,"button",81),f("click",function(){s(r);let o=u();return c(o.cerrarModalNuevoProducto())}),x(),e(9,"svg",82),b(10,"path",83),t()()(),h(),e(11,"form",84),f("ngSubmit",function(){s(r);let o=u();return c(o.guardarNuevoProducto())}),e(12,"div")(13,"label",85),i(14," Nombre del Producto "),e(15,"span",15),i(16,"*"),t()(),e(17,"input",86),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.nombre,o)||(a.nuevoProducto.nombre=o),c(o)}),t()(),e(18,"div",87)(19,"div")(20,"label",85),i(21," C\xF3digo (Auto-generado) "),t(),e(22,"input",88),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.codigo,o)||(a.nuevoProducto.codigo=o),c(o)}),t()(),e(23,"div")(24,"label",85),i(25," Categor\xEDa "),e(26,"span",15),i(27,"*"),t()(),e(28,"select",89),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.id_categoria,o)||(a.nuevoProducto.id_categoria=o),c(o)}),e(29,"option",90),i(30,"Seleccione..."),t(),w(31,le,2,2,"option",91),t()(),e(32,"div")(33,"label",85),i(34," Unidad de Medida "),e(35,"span",15),i(36,"*"),t()(),e(37,"select",92),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.unidad_medida,o)||(a.nuevoProducto.unidad_medida=o),c(o)}),w(38,de,2,2,"option",20),t()()(),e(39,"div")(40,"label",85),i(41," Marca "),t(),e(42,"input",93),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.marca,o)||(a.nuevoProducto.marca=o),c(o)}),t()(),e(43,"div",87)(44,"div")(45,"label",85),i(46," Precio de Compra "),t(),e(47,"input",94),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.precio_compra,o)||(a.nuevoProducto.precio_compra=o),c(o)}),t()(),e(48,"div")(49,"label",85),i(50," Precio de Venta "),e(51,"span",15),i(52,"*"),t()(),e(53,"input",95),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.precio_unitario,o)||(a.nuevoProducto.precio_unitario=o),c(o)}),t()(),e(54,"div")(55,"label",85),i(56," Precio Mayor "),t(),e(57,"input",96),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.precio_mayor,o)||(a.nuevoProducto.precio_mayor=o),c(o)}),t()()(),e(58,"div",97)(59,"div")(60,"label",85),i(61," Stock Inicial "),t(),e(62,"input",98),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.stock_actual,o)||(a.nuevoProducto.stock_actual=o),c(o)}),t()(),e(63,"div")(64,"label",85),i(65," Stock M\xEDnimo "),t(),e(66,"input",99),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProducto.stock_minimo,o)||(a.nuevoProducto.stock_minimo=o),c(o)}),t()()(),e(67,"div",100)(68,"button",101),f("click",function(){s(r);let o=u();return c(o.cerrarModalNuevoProducto())}),i(69," Cancelar "),t(),e(70,"button",102),x(),e(71,"svg",82),b(72,"path",29),t(),i(73," Crear Producto "),t()()()()()()}if(m&2){let r=u();d(17),g("ngModel",r.nuevoProducto.nombre),d(5),g("ngModel",r.nuevoProducto.codigo),d(6),g("ngModel",r.nuevoProducto.id_categoria),d(),y("ngValue",null),d(2),y("ngForOf",r.categorias),d(6),g("ngModel",r.nuevoProducto.unidad_medida),d(),y("ngForOf",r.unidadesMedida),d(4),g("ngModel",r.nuevoProducto.marca),d(5),g("ngModel",r.nuevoProducto.precio_compra),d(6),g("ngModel",r.nuevoProducto.precio_unitario),d(4),g("ngModel",r.nuevoProducto.precio_mayor),d(5),g("ngModel",r.nuevoProducto.stock_actual),d(4),g("ngModel",r.nuevoProducto.stock_minimo)}}function ce(m,l){if(m&1){let r=E();e(0,"div",75),f("click",function(){s(r);let o=u();return c(o.cerrarModalNuevoProveedor())}),e(1,"div",103),f("click",function(o){return s(r),c(o.stopPropagation())}),e(2,"div",77)(3,"div",78)(4,"h3",79),x(),e(5,"svg",80),b(6,"path",104),t(),i(7," Nuevo Proveedor "),t(),h(),e(8,"button",81),f("click",function(){s(r);let o=u();return c(o.cerrarModalNuevoProveedor())}),x(),e(9,"svg",82),b(10,"path",83),t()()(),h(),e(11,"form",84),f("ngSubmit",function(){s(r);let o=u();return c(o.guardarNuevoProveedor())}),e(12,"div")(13,"label",85),i(14," Nombre Completo "),e(15,"span",15),i(16,"*"),t()(),e(17,"input",105),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProveedor.nombre,o)||(a.nuevoProveedor.nombre=o),c(o)}),t()(),e(18,"div",97)(19,"div")(20,"label",85),i(21," Tipo de Documento "),e(22,"span",15),i(23,"*"),t()(),e(24,"select",106),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProveedor.tipo_documento,o)||(a.nuevoProveedor.tipo_documento=o),c(o)}),e(25,"option",107),i(26,"Seleccione..."),t(),e(27,"option",108),i(28,"DNI"),t(),e(29,"option",109),i(30,"RUC"),t(),e(31,"option",110),i(32,"Carnet de Extranjer\xEDa"),t(),e(33,"option",111),i(34,"Pasaporte"),t(),e(35,"option",112),i(36,"Otros"),t()()(),e(37,"div")(38,"label",85),i(39," N\xFAmero de Documento "),e(40,"span",15),i(41,"*"),t()(),e(42,"input",113),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProveedor.numero_documento,o)||(a.nuevoProveedor.numero_documento=o),c(o)}),t()()(),e(43,"div",97)(44,"div")(45,"label",85),i(46," Tel\xE9fono "),t(),e(47,"input",114),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProveedor.telefono,o)||(a.nuevoProveedor.telefono=o),c(o)}),t()(),e(48,"div")(49,"label",85),i(50," Correo Electr\xF3nico "),t(),e(51,"input",115),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProveedor.correo,o)||(a.nuevoProveedor.correo=o),c(o)}),t()()(),e(52,"div")(53,"label",85),i(54," Direcci\xF3n "),t(),e(55,"textarea",116),v("ngModelChange",function(o){s(r);let a=u();return _(a.nuevoProveedor.direccion,o)||(a.nuevoProveedor.direccion=o),c(o)}),t()(),e(56,"div",100)(57,"button",101),f("click",function(){s(r);let o=u();return c(o.cerrarModalNuevoProveedor())}),i(58," Cancelar "),t(),e(59,"button",102),x(),e(60,"svg",82),b(61,"path",29),t(),i(62," Guardar Proveedor "),t()()()()()()}if(m&2){let r=u();d(17),g("ngModel",r.nuevoProveedor.nombre),d(7),g("ngModel",r.nuevoProveedor.tipo_documento),d(18),g("ngModel",r.nuevoProveedor.numero_documento),d(5),g("ngModel",r.nuevoProveedor.telefono),d(4),g("ngModel",r.nuevoProveedor.correo),d(4),g("ngModel",r.nuevoProveedor.direccion)}}function me(m,l){if(m&1&&(e(0,"tr",123)(1,"td",124),i(2),t(),e(3,"td",125),i(4),t(),e(5,"td",124),i(6),W(7,"date"),t(),e(8,"td",124),i(9),t(),e(10,"td",126),i(11),t()()),m&2){let r=l.$implicit;d(2),C(r.id_compra),d(2),C((r.proveedores==null?null:r.proveedores.nombre)||"\u2014"),d(2),C(N(7,5,r.fecha,"short")),d(3),C(r.nro_documento||"\u2014"),d(2),S("S/ ",(r.total||0).toFixed(2),"")}}function ue(m,l){if(m&1&&(e(0,"table",117)(1,"thead",118)(2,"tr")(3,"th",119),i(4,"ID"),t(),e(5,"th",119),i(6,"Proveedor"),t(),e(7,"th",119),i(8,"Fecha"),t(),e(9,"th",119),i(10,"Documento"),t(),e(11,"th",120),i(12,"Total"),t()()(),e(13,"tbody",121),w(14,me,12,8,"tr",122),t()()),m&2){let r=u();d(14),y("ngForOf",r.compras)}}function pe(m,l){m&1&&(e(0,"div",127),x(),e(1,"svg",128),b(2,"path",61),t(),h(),e(3,"p",129),i(4,"No hay compras registradas"),t(),e(5,"p",130),i(6,"Aqu\xED aparecer\xE1n tus compras guardadas"),t()())}var oe=class m{constructor(l,r,n,o){this.comprasService=l;this.proveedoresService=r;this.productosService=n;this.categoriasService=o}compras=[];proveedores=[];productos=[];categorias=[];compra={id_proveedor:0,id_usuario:"",nro_documento:"",total:0};detalles=[];nuevoDetalle={id_producto:0,cantidad:1,costo_unitario:0};mostrarModalNuevoProducto=!1;nuevoProducto={nombre:"",codigo:"",id_categoria:null,unidad_medida:"UND",marca:"",precio_unitario:0,precio_mayor:0,precio_compra:0,stock_actual:0,stock_minimo:0,activo:!0};mostrarModalNuevoProveedor=!1;nuevoProveedor={nombre:"",tipo_documento:"",numero_documento:"",telefono:"",correo:"",direccion:"",activo:!0};unidadesMedida=["UND","M","KG","CAJA","L","M2","M3","PAR","SET","ROLLO","BOLSA","LITRO","GALON"];ngOnInit(){return M(this,null,function*(){this.compra.id_usuario=localStorage.getItem("user_id")??"";let l=new Date,r=l.getFullYear(),n=String(l.getMonth()+1).padStart(2,"0"),o=String(l.getDate()).padStart(2,"0"),a=String(l.getHours()).padStart(2,"0"),p=String(l.getMinutes()).padStart(2,"0");this.compra.fecha=`${r}-${n}-${o}T${a}:${p}`,this.proveedores=yield this.proveedoresService.getProveedores(),this.categorias=yield this.categoriasService.getCategorias(),this.productos=yield this.productosService.getProductos(!0),this.cargarCompras()})}cargarCompras(){return M(this,null,function*(){this.compras=yield this.comprasService.getCompras()})}getNombreProducto(l){let r=this.productos.find(n=>n.id_producto===l);return r?r.nombre:""}agregarDetalle(){if(!this.nuevoDetalle.id_producto){alert("Seleccione un producto");return}let l=this.nuevoDetalle.cantidad*this.nuevoDetalle.costo_unitario;this.detalles.push({id_producto:this.nuevoDetalle.id_producto,cantidad:this.nuevoDetalle.cantidad,costo_unitario:this.nuevoDetalle.costo_unitario,subtotal:l}),this.nuevoDetalle={id_producto:0,cantidad:1,costo_unitario:0},this.calcularTotal()}eliminarDetalle(l){this.detalles.splice(l,1),this.calcularTotal()}calcularTotal(){this.compra.total=this.detalles.reduce((l,r)=>l+(r.subtotal??0),0)}limpiarFormulario(){let l=new Date,r=l.getFullYear(),n=String(l.getMonth()+1).padStart(2,"0"),o=String(l.getDate()).padStart(2,"0"),a=String(l.getHours()).padStart(2,"0"),p=String(l.getMinutes()).padStart(2,"0");this.compra={id_proveedor:0,id_usuario:this.compra.id_usuario,nro_documento:"",total:0,fecha:`${r}-${n}-${o}T${a}:${p}`},this.detalles=[],this.nuevoDetalle={id_producto:0,cantidad:1,costo_unitario:0}}guardarCompra(){return M(this,null,function*(){if(!this.compra.id_proveedor){alert("Seleccione un proveedor");return}if(this.detalles.length===0){alert("Agregue productos");return}try{let l=yield this.comprasService.registrarCompra(this.compra,this.detalles);alert("Compra registrada #"+l),this.limpiarFormulario(),this.cargarCompras()}catch(l){console.error(l),alert("Error al registrar compra")}})}abrirModalNuevoProducto(){this.nuevoProducto={nombre:"",codigo:this.generarCodigo(),id_categoria:null,unidad_medida:"UND",marca:"",precio_unitario:0,precio_mayor:0,precio_compra:0,stock_actual:0,stock_minimo:0,activo:!0},this.mostrarModalNuevoProducto=!0}cerrarModalNuevoProducto(){this.mostrarModalNuevoProducto=!1,this.nuevoProducto={nombre:"",codigo:"",id_categoria:null,unidad_medida:"UND",marca:"",precio_unitario:0,precio_mayor:0,precio_compra:0,stock_actual:0,stock_minimo:0,activo:!0}}generarCodigo(){let l=Date.now().toString(36).toUpperCase(),r=Math.random().toString(36).substring(2,7).toUpperCase();return`${l}${r}`.substring(0,10)}guardarNuevoProducto(){return M(this,null,function*(){if(!this.nuevoProducto.nombre||!this.nuevoProducto.nombre.trim()){alert("El nombre del producto es requerido");return}if(!this.nuevoProducto.id_categoria){alert("Seleccione una categor\xEDa");return}if(!this.nuevoProducto.unidad_medida){alert("Seleccione una unidad de medida");return}if(!this.nuevoProducto.precio_unitario||this.nuevoProducto.precio_unitario<=0){alert("El precio de venta es requerido y debe ser mayor a 0");return}try{let l=yield this.productosService.addProducto(this.nuevoProducto);if(!l.id_producto)throw new Error("El producto se cre\xF3 pero no se obtuvo un ID v\xE1lido");this.productos=yield this.productosService.getProductos(!0),this.nuevoDetalle.id_producto=l.id_producto,this.nuevoProducto.precio_compra&&this.nuevoProducto.precio_compra>0&&(this.nuevoDetalle.costo_unitario=this.nuevoProducto.precio_compra),this.cerrarModalNuevoProducto(),alert(`Producto "${l.nombre}" creado exitosamente y seleccionado.`)}catch(l){console.error("Error al crear producto:",l),alert("Error al crear el producto: "+(l.message||"Error desconocido"))}})}abrirModalNuevoProveedor(){this.nuevoProveedor={nombre:"",tipo_documento:"",numero_documento:"",telefono:"",correo:"",direccion:"",activo:!0},this.mostrarModalNuevoProveedor=!0}cerrarModalNuevoProveedor(){this.mostrarModalNuevoProveedor=!1,this.nuevoProveedor={nombre:"",tipo_documento:"",numero_documento:"",telefono:"",correo:"",direccion:"",activo:!0}}guardarNuevoProveedor(){return M(this,null,function*(){if(!this.nuevoProveedor.nombre||!this.nuevoProveedor.nombre.trim()){alert("El nombre del proveedor es requerido");return}if(!this.nuevoProveedor.tipo_documento||!this.nuevoProveedor.tipo_documento.trim()){alert("El tipo de documento es requerido");return}if(!this.nuevoProveedor.numero_documento||!this.nuevoProveedor.numero_documento.trim()){alert("El n\xFAmero de documento es requerido");return}try{let l={nombre:this.nuevoProveedor.nombre,tipo_documento:this.nuevoProveedor.tipo_documento,numero_documento:this.nuevoProveedor.numero_documento,telefono:this.nuevoProveedor.telefono||"",correo:this.nuevoProveedor.correo||"",direccion:this.nuevoProveedor.direccion||"",activo:this.nuevoProveedor.activo??!0},r=yield this.proveedoresService.addProveedor(l);this.proveedores=yield this.proveedoresService.getProveedores(),r.id_proveedor&&(this.compra.id_proveedor=r.id_proveedor),this.cerrarModalNuevoProveedor(),alert(`Proveedor "${r.nombre}" creado exitosamente y seleccionado.`)}catch(l){console.error("Error al crear proveedor:",l),alert("Error al crear el proveedor: "+(l.message||"Error desconocido"))}})}static \u0275fac=function(r){return new(r||m)(P(te),P(ee),P(Z),P($))};static \u0275cmp=V({type:m,selectors:[["app-compras-list"]],standalone:!0,features:[T],decls:120,vars:15,consts:[["sinHistorial",""],[1,"p-4","md:p-6","space-y-6"],[1,"text-2xl","font-bold","text-gray-800","flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2M7 7h10M5 3h14a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2z"],[1,"text-gray-600","mt-1"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-4","md:p-6"],[1,"flex","flex-col","md:flex-row","gap-6"],[1,"w-full","md:w-4/12","space-y-4"],[1,"bg-white","p-4","rounded-lg","border","border-gray-200"],[1,"text-sm","font-semibold","text-gray-500","uppercase","tracking-wide","mb-4","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"mb-4"],[1,"block","mb-1","text-sm","font-medium","text-gray-700","dark:text-gray-300"],[1,"text-red-500"],[1,"grid","grid-cols-10","gap-2"],[1,"col-span-9"],["name","id_proveedor",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","outline-none","text-sm","transition-all","focus:border-blue-600","focus:ring-1","focus:ring-blue-200",3,"ngModelChange","ngModel"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-1","flex","justify-center","items-center"],["type","button","title","A\xF1adir Proveedor",1,"p-2","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","text-sm","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 4v16m8-8H4"],["type","datetime-local","name","fecha",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-700","text-sm","focus:ring-blue-500","focus:border-blue-500","outline-none",3,"ngModelChange","ngModel"],["type","text","name","nro_documento","placeholder","Ej: F001-000123",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","outline-none","text-sm","transition-all","focus:border-blue-600","focus:ring-1","focus:ring-blue-200",3,"ngModelChange","ngModel"],[1,"flex","flex-col","gap-2","mt-6","pt-4","border-t","border-gray-200"],["type","button",1,"w-full","flex","items-center","justify-center","gap-2","px-4","py-2.5","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","transition-colors","text-sm","font-semibold","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],["type","button",1,"w-full","px-4","py-2","bg-white","border","border-gray-300","hover:bg-gray-50","text-gray-700","rounded-lg","transition-colors","text-sm","font-medium",3,"click"],[1,"w-full","md:w-8/12","space-y-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"],[1,"block","mb-1","text-sm","font-medium","text-gray-700"],[1,"flex","gap-2"],["name","id_producto",1,"flex-1","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","outline-none","text-sm","transition-all","focus:border-blue-600","focus:ring-1","focus:ring-blue-200",3,"ngModelChange","ngModel"],["type","button","title","Crear nuevo producto",1,"inline-flex","items-center","justify-center","gap-1","px-3","py-2.5","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","text-sm","font-medium","transition-colors",3,"click"],[1,"hidden","md:inline"],[1,"grid","grid-cols-3","gap-2","mb-4"],["type","number","name","cantidad","min","1","placeholder","Cantidad",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","outline-none","text-sm","transition-all","focus:border-blue-600","focus:ring-1","focus:ring-blue-200",3,"ngModelChange","ngModel"],["type","number","name","costo_unitario","min","0","step","0.01","placeholder","Costo",1,"w-full","px-3","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","outline-none","text-sm","transition-all","focus:border-blue-600","focus:ring-1","focus:ring-blue-200",3,"ngModelChange","ngModel"],[1,"flex","items-end"],["type","button",1,"w-full","inline-flex","items-center","justify-center","gap-2","px-4","py-2.5","bg-blue-600","hover:bg-blue-700","text-white","rounded-lg","font-medium","text-sm","transition-colors","shadow-sm",3,"click"],[1,"mb-4","overflow-x-auto","overflow-y-auto","max-h-[35vh]"],[1,"w-full","border-collapse"],[1,"bg-gray-100"],[1,"text-xs","font-semibold","tracking-wide","text-left","text-gray-600","uppercase","border-b"],[1,"px-3","py-2"],[1,"px-3","py-2","text-center"],[1,"px-3","py-2","text-right","whitespace-nowrap"],[1,"px-3","py-2","text-right"],[1,"bg-white","divide-y"],["class","hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","justify-end"],[1,"bg-blue-50","border","border-blue-200","p-4","rounded-lg"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-2xl","font-bold","text-blue-600"],["class","fixed inset-0 z-50 flex items-center justify-center w-full h-full bg-black bg-opacity-50 overflow-y-auto overflow-x-hidden",3,"click",4,"ngIf"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-200","p-5"],[1,"flex","items-center","gap-2","mb-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-sm","font-semibold","text-gray-500","uppercase","tracking-wide"],[1,"overflow-x-auto"],["class","w-full min-w-[800px] border-collapse",4,"ngIf","ngIfElse"],[3,"value"],[1,"hover:bg-gray-50","transition-colors"],[1,"px-3","py-2","text-sm","text-gray-600"],[1,"px-3","py-2","text-sm","font-medium","text-gray-900"],[1,"px-3","py-2","text-sm","text-gray-700","text-center"],[1,"px-3","py-2","text-sm","text-gray-700","text-right"],[1,"px-3","py-2","text-sm","font-semibold","text-blue-600","text-right"],["type","button","title","Eliminar",1,"text-red-600","hover:text-red-800","transition-colors","p-1",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["colspan","6",1,"text-center","py-8","text-gray-500","italic"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","w-full","h-full","bg-black","bg-opacity-50","overflow-y-auto","overflow-x-hidden",3,"click"],[1,"relative","p-4","w-full","max-w-2xl",3,"click"],[1,"relative","bg-white","rounded-xl","shadow-lg","border","border-gray-200"],[1,"flex","items-center","justify-between","p-5","border-b","border-gray-200"],[1,"text-xl","font-bold","text-gray-900","flex","items-center","gap-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["type","button",1,"text-gray-400","bg-transparent","hover:bg-gray-200","hover:text-gray-900","rounded-lg","text-sm","w-8","h-8","inline-flex","justify-center","items-center","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"p-5","space-y-4","max-h-[70vh]","overflow-y-auto",3,"ngSubmit"],[1,"block","mb-2","text-sm","font-medium","text-gray-700"],["type","text","name","nombre","required","","placeholder","Ej. Martillo de carpintero 16 oz",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["type","text","name","codigo","readonly","","title","C\xF3digo generado autom\xE1ticamente",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-gray-100","text-gray-600","text-sm","cursor-not-allowed",3,"ngModelChange","ngModel"],["name","id_categoria","required","",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["name","unidad_medida","required","",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","text","name","marca","placeholder","Ej. Stanley, Bosch, DeWalt",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","number","name","precio_compra","min","0","step","0.01","placeholder","0.00",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","number","name","precio_unitario","required","","min","0.01","step","0.01","placeholder","0.00",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","number","name","precio_mayor","min","0","step","0.01","placeholder","0.00",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","number","name","stock_actual","min","0","step","0.01","placeholder","0",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","number","name","stock_minimo","min","0","step","0.01","placeholder","0",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-end","gap-3","pt-4","border-t","border-gray-200"],["type","button",1,"px-5","py-2.5","bg-gray-100","text-gray-700","font-medium","rounded-lg","hover:bg-gray-200","transition-colors",3,"click"],["type","submit",1,"flex","items-center","gap-2","px-5","py-2.5","bg-blue-600","text-white","font-medium","rounded-lg","hover:bg-blue-700","transition-colors","shadow-sm"],[1,"relative","p-4","w-full","max-w-xl",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],["type","text","name","nombre","required","","placeholder","Ej. Juan P\xE9rez o Empresa SAC",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["name","tipo_documento","required","",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["value",""],["value","DNI"],["value","RUC"],["value","CE"],["value","PASAPORTE"],["value","OTROS"],["type","text","name","numero_documento","required","","placeholder","Ej. 12345678",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","text","name","telefono","placeholder","Ej. +51 987 654 321",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["type","email","name","correo","placeholder","Ej. proveedor@email.com",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors",3,"ngModelChange","ngModel"],["name","direccion","rows","2","placeholder","Ej. Calle 123, Ciudad, Pa\xEDs",1,"w-full","px-4","py-2.5","rounded-lg","border","border-gray-300","bg-white","text-gray-900","text-sm","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","outline-none","transition-colors","resize-none",3,"ngModelChange","ngModel"],[1,"w-full","min-w-[800px]","border-collapse"],[1,"bg-gray-100","text-sm","text-gray-600"],[1,"px-4","py-3","text-left","font-semibold"],[1,"px-4","py-3","text-right","font-semibold"],[1,"text-sm"],["class","border-b hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[1,"border-b","hover:bg-gray-50","transition-colors"],[1,"px-4","py-3","text-gray-600"],[1,"px-4","py-3","font-medium","text-gray-900"],[1,"px-4","py-3","text-right","font-semibold","text-blue-600"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-gray-400"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-xs","text-gray-400","mt-1"]],template:function(r,n){if(r&1){let o=E();e(0,"div",1)(1,"div")(2,"h1",2),x(),e(3,"svg",3),b(4,"path",4),t(),i(5," Registrar Compra de Insumos "),t(),h(),e(6,"p",5),i(7,"Registra una nueva compra de insumos para tu tienda."),t()(),e(8,"div",6)(9,"form",7)(10,"div",8)(11,"div",9)(12,"h3",10),x(),e(13,"svg",11),b(14,"path",12),t(),i(15," Datos Generales "),t(),h(),e(16,"div",13)(17,"label",14),i(18," Proveedor "),e(19,"span",15),i(20,"*"),t()(),e(21,"div",16)(22,"div",17)(23,"select",18),v("ngModelChange",function(p){return s(o),_(n.compra.id_proveedor,p)||(n.compra.id_proveedor=p),c(p)}),e(24,"option",19),i(25,"Seleccionar proveedor..."),t(),w(26,re,2,2,"option",20),t()(),e(27,"div",21)(28,"button",22),f("click",function(){return s(o),c(n.abrirModalNuevoProveedor())}),x(),e(29,"svg",23),b(30,"path",24),t()()()()(),h(),e(31,"div",13)(32,"label",14),i(33," Fecha "),e(34,"span",15),i(35,"*"),t()(),e(36,"input",25),v("ngModelChange",function(p){return s(o),_(n.compra.fecha,p)||(n.compra.fecha=p),c(p)}),t()(),e(37,"div",13)(38,"label",14),i(39," N\xB0 Documento "),t(),e(40,"input",26),v("ngModelChange",function(p){return s(o),_(n.compra.nro_documento,p)||(n.compra.nro_documento=p),c(p)}),t()(),e(41,"div",27)(42,"button",28),f("click",function(){return s(o),c(n.guardarCompra())}),x(),e(43,"svg",23),b(44,"path",29),t(),i(45," Registrar Compra "),t(),h(),e(46,"button",30),f("click",function(){return s(o),c(n.limpiarFormulario())}),i(47," Limpiar Formulario "),t()()()(),e(48,"div",31)(49,"div",9)(50,"h3",10),x(),e(51,"svg",11),b(52,"path",32),t(),i(53," Detalles de Compra "),t(),h(),e(54,"div",13)(55,"label",33),i(56," Buscar Producto "),e(57,"span",15),i(58,"*"),t()(),e(59,"div",34)(60,"select",35),v("ngModelChange",function(p){return s(o),_(n.nuevoDetalle.id_producto,p)||(n.nuevoDetalle.id_producto=p),c(p)}),e(61,"option",19),i(62,"Seleccionar producto..."),t(),w(63,ie,2,4,"option",20),t(),e(64,"button",36),f("click",function(){return s(o),c(n.abrirModalNuevoProducto())}),x(),e(65,"svg",23),b(66,"path",24),t(),h(),e(67,"span",37),i(68,"Nuevo"),t()()()(),e(69,"div",38)(70,"div")(71,"label",33),i(72,"Cantidad"),t(),e(73,"input",39),v("ngModelChange",function(p){return s(o),_(n.nuevoDetalle.cantidad,p)||(n.nuevoDetalle.cantidad=p),c(p)}),t()(),e(74,"div")(75,"label",33),i(76,"P. Unitario"),t(),e(77,"input",40),v("ngModelChange",function(p){return s(o),_(n.nuevoDetalle.costo_unitario,p)||(n.nuevoDetalle.costo_unitario=p),c(p)}),t()(),e(78,"div",41)(79,"button",42),f("click",function(){return s(o),c(n.agregarDetalle())}),x(),e(80,"svg",23),b(81,"path",24),t(),i(82," Agregar "),t()()(),h(),e(83,"div",43)(84,"table",44)(85,"thead",45)(86,"tr",46)(87,"th",47),i(88,"#"),t(),e(89,"th",47),i(90,"Producto"),t(),e(91,"th",48),i(92,"Cantidad"),t(),e(93,"th",49),i(94,"P. Unitario"),t(),e(95,"th",50),i(96,"Subtotal"),t(),e(97,"th",48),i(98,"Acci\xF3n"),t()()(),e(99,"tbody",51),w(100,ne,15,5,"tr",52)(101,ae,3,0,"tr",53),t()()(),e(102,"div",54)(103,"div",55)(104,"p",56),i(105,"Total:"),t(),e(106,"p",57),i(107),t()()()()()()(),w(108,se,74,13,"div",58)(109,ce,63,6,"div",58),e(110,"div",59)(111,"div",60),x(),e(112,"svg",11),b(113,"path",61),t(),h(),e(114,"h2",62),i(115,"Historial de Compras"),t()(),e(116,"div",63),w(117,ue,15,1,"table",64)(118,pe,7,0,"ng-template",null,0,D),t()()()}if(r&2){let o=k(119);d(23),g("ngModel",n.compra.id_proveedor),d(3),y("ngForOf",n.proveedores),d(10),g("ngModel",n.compra.fecha),d(4),g("ngModel",n.compra.nro_documento),d(20),g("ngModel",n.nuevoDetalle.id_producto),d(3),y("ngForOf",n.productos),d(10),g("ngModel",n.nuevoDetalle.cantidad),d(4),g("ngModel",n.nuevoDetalle.costo_unitario),d(23),y("ngForOf",n.detalles),d(),y("ngIf",n.detalles.length===0),d(6),S(" S/ ",(n.compra.total||0).toFixed(2)," "),d(),y("ngIf",n.mostrarModalNuevoProducto),d(),y("ngIf",n.mostrarModalNuevoProveedor),d(8),y("ngIf",n.compras==null?null:n.compras.length)("ngIfElse",o)}},dependencies:[j,I,F,B,X,R,J,Y,O,U,z,G,H,Q,K,q,A],encapsulation:2})};export{oe as ComprasListComponent};
