import{a as F}from"./chunk-XIRIQAB3.js";import{a as D,b as x}from"./chunk-P4PAYY2C.js";import{a as R,b as T}from"./chunk-WMIZ32TX.js";import"./chunk-M2GT5SNT.js";import{Db as M,Eb as I,Ga as k,Hb as P,Ia as g,La as C,Ma as e,Na as t,Oa as m,Qa as h,W as w,Wa as o,Xa as s,Ya as u,db as _,ea as c,fa as d,wa as a,xa as b}from"./chunk-SFQMZB6G.js";import{h as y}from"./chunk-FK42CRUA.js";function A(p,r){if(p&1&&(e(0,"tr",36)(1,"td",37),o(2),t(),e(3,"td",38),o(4),t(),e(5,"td",39)(6,"span"),o(7),t()(),e(8,"td",40),o(9),t(),e(10,"td",41),o(11),t(),e(12,"td",42),o(13),t()()),p&2){let i=r.$implicit;a(2),s(i.codigo),a(2),s(i.nombre),a(2),C((i.stock_actual||0)<=(i.stock_minimo||0)?"text-red-600 font-bold":"text-gray-700"),a(),u(" ",i.stock_actual||0," "),a(2),s(i.stock_minimo||0),a(2),s(i.categoria||"\u2014"),a(2),u("S/ ",(i.precio_unitario||0).toFixed(2),"")}}function H(p,r){p&1&&(e(0,"tr")(1,"td",43),c(),e(2,"svg",44),m(3,"path",3),t(),d(),e(4,"p",45),o(5,"No hay productos registrados"),t(),e(6,"p",46),o(7,"Agrega productos desde el m\xF3dulo de inventario"),t()()())}var L=class p{constructor(r){this.reporteService=r}cargando=!0;stockCritico=[];porVencer=[];sinMovimiento=[];inventarioCompleto=[];ngOnInit(){return y(this,null,function*(){this.cargando=!0;try{this.stockCritico=yield this.reporteService.getStockCritico(),this.porVencer=yield this.reporteService.getPorVencer(),this.sinMovimiento=yield this.reporteService.getSinMovimiento(),this.inventarioCompleto=yield this.reporteService.getInventarioCompleto()}catch(r){console.error("Error cargando reportes de inventario",r)}this.cargando=!1})}exportarExcel(){try{if(this.inventarioCompleto.length===0){alert("No hay productos para exportar.");return}let r=this.inventarioCompleto.map(n=>({C\u00F3digo:n.codigo||"",Nombre:n.nombre||"",Categor\u00EDa:n.categoria||"","Unidad de Medida":n.unidad_medida||"","Stock Actual":n.stock_actual||0,"Stock M\xEDnimo":n.stock_minimo||0,"Precio Unitario":n.precio_unitario||0,"Precio Mayor":n.precio_mayor||0,Estado:n.activo!==!1?"Activo":"Inactivo",Marca:n.marca||"",Descripci\u00F3n:n.descripcion||""})),i=new Date().toLocaleString("es-PE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),l=["C\xF3digo","Nombre","Categor\xEDa","Unidad de Medida","Stock Actual","Stock M\xEDnimo","Precio Unitario","Precio Mayor","Estado","Marca","Descripci\xF3n"],v=[["REPORTE DE INVENTARIO"],["FERRETER\xCDA RHEMA"],[`Fecha de Exportaci\xF3n: ${i}`],[`Total de Productos: ${this.inventarioCompleto.length}`],[],l,...r.map(n=>[n.C\u00F3digo,n.Nombre,n.Categor\u00EDa,n["Unidad de Medida"],n["Stock Actual"],n["Stock M\xEDnimo"],n["Precio Unitario"],n["Precio Mayor"],n.Estado,n.Marca,n.Descripci\u00F3n])],S=x.book_new(),f=x.aoa_to_sheet(v),V=[{wch:15},{wch:30},{wch:20},{wch:15},{wch:12},{wch:12},{wch:15},{wch:15},{wch:12},{wch:20},{wch:40}];f["!cols"]=V,x.book_append_sheet(S,f,"Inventario");let E=`reporte_inventario_${new Date().toISOString().split("T")[0]}.xlsx`;D(S,E),alert(`Archivo Excel exportado correctamente: ${E}

Total de productos: ${this.inventarioCompleto.length}`)}catch(r){console.error("Error al exportar a Excel:",r),alert("Error al exportar el archivo Excel. Por favor, intente nuevamente.")}}exportarPDF(){let r=new R;r.text("Reporte de Inventario",14,10),T(r,{startY:20,head:[["C\xF3digo","Producto","Stock","Stock m\xEDnimo","Unidad"]],body:this.inventarioCompleto.map(i=>[i.codigo,i.nombre,i.stock_actual,i.stock_minimo,i.unidad_medida])}),r.save("reporte_inventario.pdf")}fechaBonita(r){return new Date(r).toLocaleDateString("es-PE")}static \u0275fac=function(i){return new(i||p)(b(F))};static \u0275cmp=w({type:p,selectors:[["app-inventario-reporte"]],standalone:!0,features:[_],decls:65,vars:5,consts:[[1,"p-4","md:p-6","space-y-6"],[1,"text-2xl","font-bold","text-gray-800","flex","items-center","gap-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"],[1,"text-gray-600","mt-1"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"p-5","bg-white","rounded-xl","border","border-gray-200","shadow-sm","hover:shadow-md","transition-shadow"],[1,"flex","items-center","gap-2","mb-2"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-red-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"text-sm","font-semibold","text-gray-500","uppercase","tracking-wide"],[1,"text-3xl","font-bold","text-red-600"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-orange-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-3xl","font-bold","text-orange-500"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"],[1,"text-3xl","font-bold","text-blue-600"],[1,"bg-white","p-5","rounded-xl","shadow-sm","border","border-gray-200"],[1,"flex","justify-between","items-center","mb-4"],[1,"font-semibold","text-gray-800","text-lg"],[1,"flex","gap-2"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-green-600","text-white","font-medium","text-sm","hover:bg-green-700","transition-colors","shadow-sm",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"flex","items-center","gap-2","px-4","py-2","rounded-lg","bg-red-600","text-white","font-medium","text-sm","hover:bg-red-700","transition-colors","shadow-sm",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"overflow-x-auto"],[1,"w-full","min-w-[800px]","border-collapse"],[1,"bg-gray-100","text-sm","text-gray-600"],[1,"px-4","py-3","text-left","font-semibold"],[1,"px-4","py-3","text-center","font-semibold"],[1,"px-4","py-3","text-right","font-semibold"],[1,"text-sm"],["class","border-b hover:bg-gray-50 transition-colors",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"border-b","hover:bg-gray-50","transition-colors"],[1,"px-4","py-3","text-gray-700","font-mono","text-xs"],[1,"px-4","py-3","font-medium","text-gray-900"],[1,"px-4","py-3","text-center"],[1,"px-4","py-3","text-center","text-gray-600"],[1,"px-4","py-3","text-gray-600"],[1,"px-4","py-3","text-right","text-gray-700"],["colspan","6",1,"text-center","text-gray-500","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-gray-400"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-400","mt-1"]],template:function(i,l){i&1&&(e(0,"div",0)(1,"div")(2,"h1",1),c(),e(3,"svg",2),m(4,"path",3),t(),o(5," Reporte de Inventario "),t(),d(),e(6,"p",4),o(7,"Estado general del inventario, vencimientos y movimientos."),t()(),e(8,"div",5)(9,"div",6)(10,"div",7),c(),e(11,"svg",8),m(12,"path",9),t(),d(),e(13,"h3",10),o(14,"Stock Cr\xEDtico"),t()(),e(15,"p",11),o(16),t()(),e(17,"div",6)(18,"div",7),c(),e(19,"svg",12),m(20,"path",13),t(),d(),e(21,"h3",10),o(22,"Por Vencer (30 d\xEDas)"),t()(),e(23,"p",14),o(24),t()(),e(25,"div",6)(26,"div",7),c(),e(27,"svg",15),m(28,"path",16),t(),d(),e(29,"h3",10),o(30,"Sin Movimiento"),t()(),e(31,"p",17),o(32),t()()(),e(33,"div",18)(34,"div",19)(35,"h2",20),o(36,"Inventario Completo"),t(),e(37,"div",21)(38,"button",22),h("click",function(){return l.exportarExcel()}),c(),e(39,"svg",23),m(40,"path",24),t(),o(41," Exportar Excel "),t(),d(),e(42,"button",25),h("click",function(){return l.exportarPDF()}),c(),e(43,"svg",23),m(44,"path",26),t(),o(45," Exportar PDF "),t()()(),d(),e(46,"div",27)(47,"table",28)(48,"thead",29)(49,"tr")(50,"th",30),o(51,"C\xF3digo"),t(),e(52,"th",30),o(53,"Producto"),t(),e(54,"th",31),o(55,"Stock Actual"),t(),e(56,"th",31),o(57,"Stock M\xEDnimo"),t(),e(58,"th",30),o(59,"Categor\xEDa"),t(),e(60,"th",32),o(61,"Precio Unit."),t()()(),e(62,"tbody",33),k(63,A,14,8,"tr",34)(64,H,8,0,"tr",35),t()()()()()),i&2&&(a(16),s(l.stockCritico.length),a(8),s(l.porVencer.length),a(8),s(l.sinMovimiento.length),a(31),g("ngForOf",l.inventarioCompleto),a(),g("ngIf",l.inventarioCompleto.length===0))},dependencies:[P,M,I]})};export{L as InventarioReporteComponent};
